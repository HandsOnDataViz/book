<!DOCTYPE html>
<html lang="en" xml:lang="en">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Leaflet Maps with Google Sheets | Hands-On Data Visualization</title>
  <meta name="description" content="Tell your story and show it with data, using free and easy-to-learn tools on the web. This introductory book teaches you how to design interactive charts and customized maps for your website, beginning with easy drag-and-drop tools, such as Google Sheets, Datawrapper, and Tableau Public. You will also gradually learn how to edit open-source code templates like Chart.js, Highcharts, and Leaflet on GitHub. Follow along with the step-by-step tutorials, real-world examples, and online resources. This book is ideal for students, non-profit organizations, small business owners, local governments, journalists, academics, or anyone who wants to tell their story and show the data. No coding experience is required." />
  <meta name="generator" content="bookdown 0.21 and GitBook 2.6.7" />

  <meta property="og:title" content="Leaflet Maps with Google Sheets | Hands-On Data Visualization" />
  <meta property="og:type" content="book" />
  <meta property="og:url" content="http://handsondataviz.github.io/" />
  <meta property="og:image" content="http://handsondataviz.github.io/images/cover-400wide.jpg" />
  <meta property="og:description" content="Tell your story and show it with data, using free and easy-to-learn tools on the web. This introductory book teaches you how to design interactive charts and customized maps for your website, beginning with easy drag-and-drop tools, such as Google Sheets, Datawrapper, and Tableau Public. You will also gradually learn how to edit open-source code templates like Chart.js, Highcharts, and Leaflet on GitHub. Follow along with the step-by-step tutorials, real-world examples, and online resources. This book is ideal for students, non-profit organizations, small business owners, local governments, journalists, academics, or anyone who wants to tell their story and show the data. No coding experience is required." />
  <meta name="github-repo" content="handsondataviz/book" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Leaflet Maps with Google Sheets | Hands-On Data Visualization" />
  <meta name="twitter:site" content="@handsondataviz" />
  <meta name="twitter:description" content="Tell your story and show it with data, using free and easy-to-learn tools on the web. This introductory book teaches you how to design interactive charts and customized maps for your website, beginning with easy drag-and-drop tools, such as Google Sheets, Datawrapper, and Tableau Public. You will also gradually learn how to edit open-source code templates like Chart.js, Highcharts, and Leaflet on GitHub. Follow along with the step-by-step tutorials, real-world examples, and online resources. This book is ideal for students, non-profit organizations, small business owners, local governments, journalists, academics, or anyone who wants to tell their story and show the data. No coding experience is required." />
  <meta name="twitter:image" content="http://handsondataviz.github.io/images/cover-400wide.jpg" />

<meta name="author" content="Jack Dougherty" />
<meta name="author" content="Ilya Ilyankou" />


<meta name="date" content="2020-12-17" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  <link rel="shortcut icon" href="images/favicon.png" type="image/x-icon" />
<link rel="prev" href="leaflet.html"/>
<link rel="next" href="leaflet-storymaps-with-google-sheets.html"/>
<script src="libs/header-attrs-2.5/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script>
<link href="libs/anchor-sections-1.0/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0/anchor-sections.js"></script>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-5488840-29"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-5488840-29');
</script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="css/style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./"><strong>Hands-On Data Visualization</strong><br>by Jack Dougherty & Ilya Ilyankou</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a>
<ul>
<li class="chapter" data-level="" data-path="audience-overview.html"><a href="audience-overview.html"><i class="fa fa-check"></i>Audience and Overview</a></li>
<li class="chapter" data-level="" data-path="authors.html"><a href="authors.html"><i class="fa fa-check"></i>Authors &amp; Acknowledgements</a></li>
<li class="chapter" data-level="" data-path="open-access.html"><a href="open-access.html"><i class="fa fa-check"></i>About Open-Access Web Edition</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i><b>1</b> Introduction: Why Data Visualization?</a>
<ul>
<li class="chapter" data-level="" data-path="believe.html"><a href="believe.html"><i class="fa fa-check"></i>What Can You Believe?</a></li>
<li class="chapter" data-level="" data-path="persuasive.html"><a href="persuasive.html"><i class="fa fa-check"></i>Some Pictures Are More Persuasive</a></li>
<li class="chapter" data-level="" data-path="shades.html"><a href="shades.html"><i class="fa fa-check"></i>Different Shades of the Truth</a></li>
<li class="chapter" data-level="" data-path="organization.html"><a href="organization.html"><i class="fa fa-check"></i>Organization of the Book</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="choose.html"><a href="choose.html"><i class="fa fa-check"></i><b>2</b> Choose Tools to Tell Your Story</a>
<ul>
<li class="chapter" data-level="" data-path="sketch.html"><a href="sketch.html"><i class="fa fa-check"></i>Start Sketching Your Data Story</a></li>
<li class="chapter" data-level="" data-path="tool-factors.html"><a href="tool-factors.html"><i class="fa fa-check"></i>Ten Factors When Considering Tools</a></li>
<li class="chapter" data-level="" data-path="recommended-tools.html"><a href="recommended-tools.html"><i class="fa fa-check"></i>Our Recommended Tools</a></li>
<li class="chapter" data-level="" data-path="password-manager.html"><a href="password-manager.html"><i class="fa fa-check"></i>Use a Password Manager</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="spreadsheet.html"><a href="spreadsheet.html"><i class="fa fa-check"></i><b>3</b> Strengthen Your Spreadsheet Skills</a>
<ul>
<li class="chapter" data-level="" data-path="spreadsheet-tools.html"><a href="spreadsheet-tools.html"><i class="fa fa-check"></i>Select your Spreadsheet Tools</a></li>
<li class="chapter" data-level="" data-path="csv.html"><a href="csv.html"><i class="fa fa-check"></i>Download to CSV or ODS Format</a></li>
<li class="chapter" data-level="" data-path="copy.html"><a href="copy.html"><i class="fa fa-check"></i>Make a Copy of a Google Sheet</a></li>
<li class="chapter" data-level="" data-path="share.html"><a href="share.html"><i class="fa fa-check"></i>Share Your Google Sheets</a></li>
<li class="chapter" data-level="" data-path="upload.html"><a href="upload.html"><i class="fa fa-check"></i>Upload and Convert to Google Sheets</a></li>
<li class="chapter" data-level="" data-path="geocode.html"><a href="geocode.html"><i class="fa fa-check"></i>Geocode Addresses in Google Sheets</a></li>
<li class="chapter" data-level="" data-path="forms.html"><a href="forms.html"><i class="fa fa-check"></i>Collect Data with Google Forms</a></li>
<li class="chapter" data-level="" data-path="sort.html"><a href="sort.html"><i class="fa fa-check"></i>Sort and Filter Data</a></li>
<li class="chapter" data-level="" data-path="calculate.html"><a href="calculate.html"><i class="fa fa-check"></i>Calculate with Formulas</a></li>
<li class="chapter" data-level="" data-path="pivot.html"><a href="pivot.html"><i class="fa fa-check"></i>Summarize Data with Pivot Tables</a></li>
<li class="chapter" data-level="" data-path="vlookup.html"><a href="vlookup.html"><i class="fa fa-check"></i>Match Columns with VLOOKUP</a></li>
<li class="chapter" data-level="" data-path="database.html"><a href="database.html"><i class="fa fa-check"></i>Spreadsheet vs. Relational Database</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="find.html"><a href="find.html"><i class="fa fa-check"></i><b>4</b> Find and Question Your Data</a>
<ul>
<li class="chapter" data-level="" data-path="guiding.html"><a href="guiding.html"><i class="fa fa-check"></i>Guiding Questions for Your Search</a></li>
<li class="chapter" data-level="" data-path="public.html"><a href="public.html"><i class="fa fa-check"></i>Public and Private Data</a></li>
<li class="chapter" data-level="" data-path="mask-aggregate.html"><a href="mask-aggregate.html"><i class="fa fa-check"></i>Mask or Aggregate Sensitive Data</a></li>
<li class="chapter" data-level="" data-path="opendata.html"><a href="opendata.html"><i class="fa fa-check"></i>Open Data Repositories</a></li>
<li class="chapter" data-level="" data-path="source.html"><a href="source.html"><i class="fa fa-check"></i>Source Your Data</a></li>
<li class="chapter" data-level="" data-path="bad-data.html"><a href="bad-data.html"><i class="fa fa-check"></i>Recognize Bad Data</a></li>
<li class="chapter" data-level="" data-path="question.html"><a href="question.html"><i class="fa fa-check"></i>Question Your Data</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="clean.html"><a href="clean.html"><i class="fa fa-check"></i><b>5</b> Clean Up Messy Data</a>
<ul>
<li class="chapter" data-level="" data-path="smart-cleanup.html"><a href="smart-cleanup.html"><i class="fa fa-check"></i>Smart Cleanup with Google Sheets</a></li>
<li class="chapter" data-level="" data-path="find-and-replace.html"><a href="find-and-replace.html"><i class="fa fa-check"></i>Find and Replace with Blank</a></li>
<li class="chapter" data-level="" data-path="transpose.html"><a href="transpose.html"><i class="fa fa-check"></i>Transpose Rows and Columns</a></li>
<li class="chapter" data-level="" data-path="split-data.html"><a href="split-data.html"><i class="fa fa-check"></i>Split Data into Separate Columns</a></li>
<li class="chapter" data-level="" data-path="combine-data.html"><a href="combine-data.html"><i class="fa fa-check"></i>Combine Data into One Column</a></li>
<li class="chapter" data-level="" data-path="tabula.html"><a href="tabula.html"><i class="fa fa-check"></i>Extract Tables from PDFs with Tabula</a></li>
<li class="chapter" data-level="" data-path="open-refine.html"><a href="open-refine.html"><i class="fa fa-check"></i>Clean Data with OpenRefine</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="comparisons.html"><a href="comparisons.html"><i class="fa fa-check"></i><b>6</b> Make Meaningful Comparisons</a>
<ul>
<li class="chapter" data-level="" data-path="describe-comparisons.html"><a href="describe-comparisons.html"><i class="fa fa-check"></i>Precisely Describe Comparisons</a></li>
<li class="chapter" data-level="" data-path="normalize.html"><a href="normalize.html"><i class="fa fa-check"></i>Normalize Your Data</a></li>
<li class="chapter" data-level="" data-path="biased-comparisons.html"><a href="biased-comparisons.html"><i class="fa fa-check"></i>Beware of Biased Comparisons</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="chart.html"><a href="chart.html"><i class="fa fa-check"></i><b>7</b> Chart Your Data</a>
<ul>
<li class="chapter" data-level="" data-path="chart-design.html"><a href="chart-design.html"><i class="fa fa-check"></i>Chart Design Principles</a></li>
<li class="chapter" data-level="" data-path="chart-google.html"><a href="chart-google.html"><i class="fa fa-check"></i>Google Sheets Charts</a></li>
<li class="chapter" data-level="" data-path="bar-column-google.html"><a href="bar-column-google.html"><i class="fa fa-check"></i>- Bar and Column Charts</a></li>
<li class="chapter" data-level="" data-path="histogram-google.html"><a href="histogram-google.html"><i class="fa fa-check"></i>- Histograms</a></li>
<li class="chapter" data-level="" data-path="pie-line-area-google.html"><a href="pie-line-area-google.html"><i class="fa fa-check"></i>- Pie, Line, and Area Charts</a></li>
<li class="chapter" data-level="" data-path="chart-datawrapper.html"><a href="chart-datawrapper.html"><i class="fa fa-check"></i>Datawrapper Charts</a></li>
<li class="chapter" data-level="" data-path="annotated-datawrapper.html"><a href="annotated-datawrapper.html"><i class="fa fa-check"></i>- Annotated Charts</a></li>
<li class="chapter" data-level="" data-path="range-datawrapper.html"><a href="range-datawrapper.html"><i class="fa fa-check"></i>- Range Charts</a></li>
<li class="chapter" data-level="" data-path="scatter-bubble-datawrapper.html"><a href="scatter-bubble-datawrapper.html"><i class="fa fa-check"></i>- Scatter and Bubble Charts</a></li>
<li class="chapter" data-level="" data-path="chart-tableau.html"><a href="chart-tableau.html"><i class="fa fa-check"></i>Tableau Public Charts</a></li>
<li class="chapter" data-level="" data-path="scatter-tableau.html"><a href="scatter-tableau.html"><i class="fa fa-check"></i>- Scatter Chart</a></li>
<li class="chapter" data-level="" data-path="filtered-line-tableau.html"><a href="filtered-line-tableau.html"><i class="fa fa-check"></i>- Filtered Line Chart</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="map.html"><a href="map.html"><i class="fa fa-check"></i><b>8</b> Map Your Data</a>
<ul>
<li class="chapter" data-level="" data-path="map-design.html"><a href="map-design.html"><i class="fa fa-check"></i>Map Design Principles</a></li>
<li class="chapter" data-level="" data-path="design-choropleth.html"><a href="design-choropleth.html"><i class="fa fa-check"></i>Design Choropleth Colors &amp; Intervals</a></li>
<li class="chapter" data-level="" data-path="normalize-choropleth.html"><a href="normalize-choropleth.html"><i class="fa fa-check"></i>Normalize Choropleth Map Data</a></li>
<li class="chapter" data-level="" data-path="mymaps.html"><a href="mymaps.html"><i class="fa fa-check"></i>Point Map with Google My Maps</a></li>
<li class="chapter" data-level="" data-path="symbolmap-datawrapper.html"><a href="symbolmap-datawrapper.html"><i class="fa fa-check"></i>Symbol Point Map with Datawrapper</a></li>
<li class="chapter" data-level="" data-path="choropleth-datawrapper.html"><a href="choropleth-datawrapper.html"><i class="fa fa-check"></i>Choropleth Map with Datawrapper</a></li>
<li class="chapter" data-level="" data-path="map-tableau.html"><a href="map-tableau.html"><i class="fa fa-check"></i>Choropleth Map with Tableau Public</a></li>
<li class="chapter" data-level="" data-path="map-socrata.html"><a href="map-socrata.html"><i class="fa fa-check"></i>Current Map with Socrata Open Data</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="table.html"><a href="table.html"><i class="fa fa-check"></i><b>9</b> Table Your Data</a>
<ul>
<li class="chapter" data-level="" data-path="table-design.html"><a href="table-design.html"><i class="fa fa-check"></i>Table Design Principles</a></li>
<li class="chapter" data-level="" data-path="table-datawrapper.html"><a href="table-datawrapper.html"><i class="fa fa-check"></i>Datawrapper Table with Sparklines</a></li>
<li class="chapter" data-level="" data-path="other-table-tools.html"><a href="other-table-tools.html"><i class="fa fa-check"></i>Other Table-Making Tools</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="embed.html"><a href="embed.html"><i class="fa fa-check"></i><b>10</b> Embed On the Web</a>
<ul>
<li class="chapter" data-level="" data-path="static.html"><a href="static.html"><i class="fa fa-check"></i>Static Image vs Interactive iframe</a></li>
<li class="chapter" data-level="" data-path="embed-code.html"><a href="embed-code.html"><i class="fa fa-check"></i>Get the Embed Code or iframe Tag</a></li>
<li class="chapter" data-level="" data-path="paste-code.html"><a href="paste-code.html"><i class="fa fa-check"></i>Paste Code or iframe to Website</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="github.html"><a href="github.html"><i class="fa fa-check"></i><b>11</b> Edit and Host Code with GitHub</a>
<ul>
<li class="chapter" data-level="" data-path="copy-leaflet.html"><a href="copy-leaflet.html"><i class="fa fa-check"></i>Copy, Edit, and Host a Simple Leaflet Map Template</a></li>
<li class="chapter" data-level="" data-path="gh-pages-link-to-iframe.html"><a href="gh-pages-link-to-iframe.html"><i class="fa fa-check"></i>Convert GitHub Pages Link to iframe</a></li>
<li class="chapter" data-level="" data-path="create-repo.html"><a href="create-repo.html"><i class="fa fa-check"></i>Create a New Repo and Upload Files on GitHub</a></li>
<li class="chapter" data-level="" data-path="github-desktop-atom.html"><a href="github-desktop-atom.html"><i class="fa fa-check"></i>GitHub Desktop and Atom Editor to Code Efficiently</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="chartcode.html"><a href="chartcode.html"><i class="fa fa-check"></i><b>12</b> Chart.js and Highcharts Templates</a>
<ul>
<li class="chapter" data-level="" data-path="chartjs-bar-column.html"><a href="chartjs-bar-column.html"><i class="fa fa-check"></i>Bar or Column Chart with Chart.js</a></li>
<li class="chapter" data-level="" data-path="chartjs-error-bars.html"><a href="chartjs-error-bars.html"><i class="fa fa-check"></i>Error Bars with Chart.js</a></li>
<li class="chapter" data-level="" data-path="chartjs-line.html"><a href="chartjs-line.html"><i class="fa fa-check"></i>Line Chart with Chart.js</a></li>
<li class="chapter" data-level="" data-path="highcharts-annotated-line.html"><a href="highcharts-annotated-line.html"><i class="fa fa-check"></i>Annotated Line Chart with Highcharts</a></li>
<li class="chapter" data-level="" data-path="chartjs-scatter.html"><a href="chartjs-scatter.html"><i class="fa fa-check"></i>Scatter Chart with Chart.js</a></li>
<li class="chapter" data-level="" data-path="chartjs-bubble.html"><a href="chartjs-bubble.html"><i class="fa fa-check"></i>Bubble Chart with Chart.js</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="leaflet.html"><a href="leaflet.html"><i class="fa fa-check"></i><b>13</b> Leaflet Map Templates</a>
<ul>
<li class="chapter" data-level="" data-path="leaflet-maps-with-google-sheets.html"><a href="leaflet-maps-with-google-sheets.html"><i class="fa fa-check"></i>Leaflet Maps with Google Sheets</a></li>
<li class="chapter" data-level="" data-path="leaflet-storymaps-with-google-sheets.html"><a href="leaflet-storymaps-with-google-sheets.html"><i class="fa fa-check"></i>Leaflet Storymaps with Google Sheets</a></li>
<li class="chapter" data-level="" data-path="google-sheets-api-key.html"><a href="google-sheets-api-key.html"><i class="fa fa-check"></i>Get Your Google Sheets API Key</a></li>
<li class="chapter" data-level="" data-path="leaflet-maps-with-csv.html"><a href="leaflet-maps-with-csv.html"><i class="fa fa-check"></i>Leaflet Maps with CSV Data</a></li>
<li class="chapter" data-level="" data-path="leaflet-heatmap.html"><a href="leaflet-heatmap.html"><i class="fa fa-check"></i>Leaflet Heatmap Points with CSV Data</a></li>
<li class="chapter" data-level="" data-path="leaflet-searchable-map.html"><a href="leaflet-searchable-map.html"><i class="fa fa-check"></i>Leaflet Searchable Point Map</a></li>
<li class="chapter" data-level="" data-path="leaflet-maps-open-data-apis.html"><a href="leaflet-maps-open-data-apis.html"><i class="fa fa-check"></i>Leaflet Maps with Open Data APIs</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="transform.html"><a href="transform.html"><i class="fa fa-check"></i><b>14</b> Transform Your Map Data</a>
<ul>
<li class="chapter" data-level="" data-path="geojson.html"><a href="geojson.html"><i class="fa fa-check"></i>Geospatial Data and GeoJSON</a></li>
<li class="chapter" data-level="" data-path="find-geojson.html"><a href="find-geojson.html"><i class="fa fa-check"></i>Find GeoJSON Boundary Files</a></li>
<li class="chapter" data-level="" data-path="geojsonio.html"><a href="geojsonio.html"><i class="fa fa-check"></i>Draw and Edit with GeoJson.io</a></li>
<li class="chapter" data-level="" data-path="mapshaper.html"><a href="mapshaper.html"><i class="fa fa-check"></i>Edit and Join with Mapshaper</a></li>
<li class="chapter" data-level="" data-path="convert-kmz.html"><a href="convert-kmz.html"><i class="fa fa-check"></i>Convert Compressed KMZ to KML</a></li>
<li class="chapter" data-level="" data-path="mapwarper.html"><a href="mapwarper.html"><i class="fa fa-check"></i>Georeference with MapWarper</a></li>
<li class="chapter" data-level="" data-path="bulk-geocode.html"><a href="bulk-geocode.html"><i class="fa fa-check"></i>Bulk Geocode with US Census</a></li>
<li class="chapter" data-level="" data-path="pivot-point-to-polygon.html"><a href="pivot-point-to-polygon.html"><i class="fa fa-check"></i>Pivot Points into Polygon Data</a></li>
</ul></li>
<li class="chapter" data-level="15" data-path="detect.html"><a href="detect.html"><i class="fa fa-check"></i><b>15</b> Detect Lies and Reduce Bias</a>
<ul>
<li class="chapter" data-level="" data-path="how-to-lie-with-charts.html"><a href="how-to-lie-with-charts.html"><i class="fa fa-check"></i>How to Lie with Charts</a></li>
<li class="chapter" data-level="" data-path="how-to-lie-with-maps.html"><a href="how-to-lie-with-maps.html"><i class="fa fa-check"></i>How to Lie with Maps</a></li>
<li class="chapter" data-level="" data-path="data-bias.html"><a href="data-bias.html"><i class="fa fa-check"></i>Recognize and Reduce Data Bias</a></li>
<li class="chapter" data-level="" data-path="spatial-bias.html"><a href="spatial-bias.html"><i class="fa fa-check"></i>Recognize and Reduce Spatial Bias</a></li>
</ul></li>
<li class="chapter" data-level="16" data-path="story.html"><a href="story.html"><i class="fa fa-check"></i><b>16</b> Tell and Show Your Data Story</a>
<ul>
<li class="chapter" data-level="" data-path="storyboard.html"><a href="storyboard.html"><i class="fa fa-check"></i>Build a Narrative on a Storyboard</a></li>
<li class="chapter" data-level="" data-path="draw-attention.html"><a href="draw-attention.html"><i class="fa fa-check"></i>Draw Attention to Meaning</a></li>
<li class="chapter" data-level="" data-path="sources-uncertainty.html"><a href="sources-uncertainty.html"><i class="fa fa-check"></i>Acknowledge Sources &amp; Uncertainty</a></li>
<li class="chapter" data-level="" data-path="story-format.html"><a href="story-format.html"><i class="fa fa-check"></i>Decide On Your Data Story Format</a></li>
</ul></li>
<li class="appendix"><span><b>Appendix</b></span></li>
<li class="chapter" data-level="A" data-path="fix.html"><a href="fix.html"><i class="fa fa-check"></i><b>A</b> Fix Common Mistakes</a></li>
<li class="chapter" data-level="B" data-path="ct.html"><a href="ct.html"><i class="fa fa-check"></i><b>B</b> Find Connecticut Data</a></li>
<li class="chapter" data-level="C" data-path="peer.html"><a href="peer.html"><i class="fa fa-check"></i><b>C</b> Peer Review Samples</a>
<ul>
<li class="chapter" data-level="" data-path="peer-2-chart-1.html"><a href="peer-2-chart-1.html"><i class="fa fa-check"></i>Section 2 Chart 1 Peer Review Sample</a></li>
<li class="chapter" data-level="" data-path="peer-2-chart-1-notes.html"><a href="peer-2-chart-1-notes.html"><i class="fa fa-check"></i>Section 2 Chart 1 Peer Review Sample with Notes</a></li>
<li class="chapter" data-level="" data-path="peer-2-chart-2.html"><a href="peer-2-chart-2.html"><i class="fa fa-check"></i>Section 2 Chart 2 Peer Review Sample</a></li>
<li class="chapter" data-level="" data-path="peer-2-chart-2-notes.html"><a href="peer-2-chart-2-notes.html"><i class="fa fa-check"></i>Section 2 Chart 2 Peer Review Sample with Notes</a></li>
<li class="chapter" data-level="" data-path="peer-3-sample-1.html"><a href="peer-3-sample-1.html"><i class="fa fa-check"></i>Section 3 Peer Review Sample 1</a></li>
<li class="chapter" data-level="" data-path="peer-3-sample-1-notes.html"><a href="peer-3-sample-1-notes.html"><i class="fa fa-check"></i>Section 3 Peer Review Sample 1 with Notes</a></li>
<li class="chapter" data-level="" data-path="peer-3-sample-2.html"><a href="peer-3-sample-2.html"><i class="fa fa-check"></i>Section 3 Peer Review Sample 2</a></li>
<li class="chapter" data-level="" data-path="peer-3-sample-2-notes.html"><a href="peer-3-sample-2-notes.html"><i class="fa fa-check"></i>Section 3 Peer Review Sample 2 with Notes</a></li>
</ul></li>
<li class="chapter" data-level="D" data-path="bookdown.html"><a href="bookdown.html"><i class="fa fa-check"></i><b>D</b> Publishing with Bookdown</a>
<ul>
<li class="chapter" data-level="" data-path="collaborative-writing-on-github.html"><a href="collaborative-writing-on-github.html"><i class="fa fa-check"></i>Collaborative Writing on GitHub</a></li>
<li><a href="style-guide.html#style-guide">Style Guide for <em>Hands-On Data Visualization</em></a></li>
<li class="chapter" data-level="" data-path="images.html"><a href="images.html"><i class="fa fa-check"></i>Images</a></li>
<li class="chapter" data-level="" data-path="tables.html"><a href="tables.html"><i class="fa fa-check"></i>Tables</a></li>
<li class="chapter" data-level="" data-path="notes.html"><a href="notes.html"><i class="fa fa-check"></i>Notes and Bibliography</a></li>
<li class="chapter" data-level="" data-path="modify-markdown.html"><a href="modify-markdown.html"><i class="fa fa-check"></i>Manually Modify Markdown Output</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li style="padding: 10px 15px; font-weight: bold;">Open access book-in-progress</li>
<li><a rel="license" href="http://creativecommons.org/licenses/by-nc-nd/4.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-nd/4.0/88x31.png" /></a></li>
<li><a href="https://bookdown.org" target="_blank">Built with Bookdown + RStudio</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Hands-On Data Visualization</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="leaflet-maps-with-google-sheets" class="section level2 unnumbered" number="">
<h2>Leaflet Maps with Google Sheets</h2>
<p>Sometimes you need to create a map that cannot be made easily with drag-and-drop tools, because you need to customize its appearance or show some combination of point, polygon, or polyline data. One solution is to build your map based on our Leaflet Maps with Google Sheets code template, which allows you to display custom point icons, pick any choropleth color palettes, and stack different combinations of map data layers, as shown in Figure <a href="leaflet-maps-with-google-sheets.html#fig:lmwgs-map">13.1</a>. If you’ve explored prior chapters in this book, this template is a good template for newer users, because you enter your map data and settings in a linked Google Sheet, as shown in Figure <a href="leaflet-maps-with-google-sheets.html#fig:lmwgs-sheet">13.2</a>, and upload images or geographic files into a folder in your GitHub repository. All of the data you enter can easily be exported and migrated to other platforms as visualization technology continues to evolve in the future, as we discussed in the <a href="choose.html">how to choose tools section in Chapter 2</a>. Furthermore, the map design is responsive, meaning it automatically resizes to look good on small or large screens. Finally, the Leaflet Maps template is built on flexible open-source software that’s written primarily in JavaScript, a very common coding language for the web, so you can customize it further if you have skills or support from a developer.</p>

<div class="figure"><span id="fig:lmwgs-map"></span>
<iframe src="https://handsondataviz.github.io/leaflet-maps-with-google-sheets/" width="672" height="500px">
</iframe>
<p class="caption">
Figure 13.1: Explore the <a href="https://handsondataviz.github.io/leaflet-maps-with-google-sheets/">interactive Leaflet Maps with Google Sheets</a>.
</p>
</div>

<div class="figure"><span id="fig:lmwgs-sheet"></span>
<iframe src="https://docs.google.com/spreadsheets/d/1ZxvU8eGyuN9M8GxTU9acKVJv70iC3px_m3EVFsOHN9g/pubhtml?widget=true&amp;amp;headers=false" width="672" height="500px">
</iframe>
<p class="caption">
Figure 13.2: View the <a href="https://docs.google.com/spreadsheets/d/1ZxvU8eGyuN9M8GxTU9acKVJv70iC3px_m3EVFsOHN9g">online Google Sheet template</a> that feeds data into the Leaflet Maps demo above.
</p>
</div>
<div id="tutorial-requirements-and-overview" class="section level3 unnumbered" number="">
<h3>Tutorial Requirements and Overview</h3>
<p>Before you begin, you must have a <a href="http://drive.google.com">Google Drive account</a> and know how to <a href="copy.html">Make a Copy in Google Sheets as described in Chapter 3</a>. Also, you must have a <a href="http://github.com">GitHub account</a> and know how to <a href="github.html">Edit and Host Code with GitHub as described in Chapter 11</a>. We omitted some screenshots below that illustrate steps we previously covered, so if you get lost, go back to those chapters.</p>
<p>Since this tutorial involves multiple steps, we created this outline to provide a broad overview. In the first part, you will create and publish your copies of two templates, one for GitHub and another for its linked Google Sheet.</p>
<ul>
<li><ol style="list-style-type: upper-alpha">
<li>Copy the GitHub template and publish your version with GitHub Pages.</li>
</ol></li>
<li><ol start="2" style="list-style-type: upper-alpha">
<li>File &gt; Make a Copy of Google Sheet template, Share, and Publish.</li>
</ol></li>
<li><ol start="3" style="list-style-type: upper-alpha">
<li>Paste your Google Sheet browser address in two places in your GitHub repo.</li>
</ol></li>
<li><ol start="4" style="list-style-type: upper-alpha">
<li>Update your Google Sheet <em>Options</em> tab info and refresh your live map.</li>
</ol></li>
</ul>
<p>In the second part, you will learn how to upload and display different types of map data, such as points, polygons, and polylines, and to edit colors, icons, and images, by entering data into the linked Google Sheet and uploading files to your GitHub repo.</p>
<ul>
<li><ol start="5" style="list-style-type: upper-alpha">
<li>Geocode locations and customize new markers in the Points tab.</li>
</ol></li>
<li><ol start="6" style="list-style-type: upper-alpha">
<li>Remove or display point, polygon, or polylines data and legends.</li>
</ol></li>
</ul>
<p>In the third part, you have two options to finalize your map before publicly sharing it with others:</p>
<ul>
<li><ol start="7" style="list-style-type: upper-alpha">
<li>Save each Google Sheets tab as a CSV file and upload to GitHub.</li>
</ol></li>
<li>OR</li>
<li><ol start="8" style="list-style-type: upper-alpha">
<li>Get your own Google Sheets API Key to insert into the code.</li>
</ol></li>
</ul>
<p>If any problems arise, see the <a href="fix.html">Fix Common Mistakes</a> section of the appendix.</p>
<p>Now that you have a better sense of the big picture, let’s get started with the first part of the tutorial.</p>
<div id="a-copy-the-github-template-and-publish-your-version-with-github-pages" class="section level4 unnumbered" number="">
<h4>A) Copy the GitHub template and publish your version with GitHub Pages</h4>
<ol style="list-style-type: decimal">
<li><p>Open the <a href="https://github.com/handsondataviz/leaflet-maps-with-google-sheets">GitHub code template</a> in a new tab.</p></li>
<li><p>In the upper-right corner of the code template, sign in to your free GitHub account.</p></li>
<li><p>In the upper-right corner, click the green <em>Use this template</em> button to make a copy of the repository in your GitHub account. On the next screen, name your repo <code>leaflet-maps-with-google-sheets</code> or choose a different meaningful name in all lower-case. Click the <em>Create repository from template</em> button. Your copy of the repo will follow this format:</p></li>
</ol>
<p><code>https://github.com/USERNAME/leaflet-maps-with-google-sheets</code></p>
<ol start="4" style="list-style-type: decimal">
<li>In your new copy of the code repo, click the upper-right <em>Settings</em> button and scroll way down to the GitHub Pages area. In the drop-down menu, change <em>Source</em> from <em>None</em> to <em>Main</em>, keep the default <em>/(root)</em> setting, and press <em>Save</em> as shown in Figure <a href="leaflet-maps-with-google-sheets.html#fig:leaflet-github-pages-main2">13.3</a>. This step tells GitHub to publish a live version of your map on the public web, where anyone can access it in their browser, if they have the web address.</li>
</ol>

<div class="figure"><span id="fig:leaflet-github-pages-main2"></span>
<img src="images/13-leaflet/leaflet-github-pages-main.png" alt="In Settings, go to GitHub Pages, switch the source from None to Main, and Save." width="300" />
<p class="caption">
Figure 13.3: In <em>Settings</em>, go to <em>GitHub Pages</em>, switch the source from <em>None</em> to <em>Main</em>, and <em>Save</em>.
</p>
</div>
<ol start="5" style="list-style-type: decimal">
<li>Scroll down to GitHub Pages section again, and copy the link to your published web site, which will appear in this format:</li>
</ol>
<p><code>https://USERNAME.github.io/leaflet-maps-with-google-sheets</code></p>
<ol start="6" style="list-style-type: decimal">
<li><p>Scroll up to the top, and click on your repo name to go back to its main page.</p></li>
<li><p>At the top level of your repo main page, click on README.md, and click the pencil icon to edit this file.</p></li>
<li><p>Delete the link to the <em>our</em> live site, as shown in Figure <a href="leaflet-maps-with-google-sheets.html#fig:leaflet-readme-link-top">13.4</a>, and paste in the link to <em>your</em> published site. Scroll down to <em>Commit</em> your changes.</p></li>
</ol>

<div class="figure"><span id="fig:leaflet-readme-link-top"></span>
<img src="images/13-leaflet/leaflet-readme-link-top.png" alt="Edit your README file to replace the link to our site with the link to your site."  />
<p class="caption">
Figure 13.4: Edit your README file to replace the link to <em>our</em> site with the link to <em>your</em> site.
</p>
</div>
<ol start="9" style="list-style-type: decimal">
<li>On your repo main page, right-click the link to open your live map in a new tab. <em>Be patient</em> during busy periods on GitHub, when your website may take up to 1 minute to appear for the first time.</li>
</ol>
</div>
<div id="b-file-make-a-copy-of-google-sheet-template-share-and-publish" class="section level4 unnumbered" number="">
<h4>B) File &gt; Make a Copy of Google Sheet template, Share, and Publish</h4>
<ol style="list-style-type: decimal">
<li><p>Open the <a href="https://docs.google.com/spreadsheets/d/1ZxvU8eGyuN9M8GxTU9acKVJv70iC3px_m3EVFsOHN9g">Google Sheets template</a> in a new tab.</p></li>
<li><p>Sign into your Google account, and select <em>File &gt; Make a Copy</em> to save your own version of this Google Sheet on your Google Drive.</p></li>
<li><p>Click the blue <em>Share</em> button, and click <em>Change to anyone with the link</em>, then click <em>Done</em>. This publicly shares your map data, which is required to make this template work.</p></li>
<li><p>Go to <em>File &gt; Publish to the Web</em>, and click the green <em>Publish</em> button to publish the entire document, so that the Leaflet code can read it. Then click the upper-right <em>X</em> symbol to close this window.</p></li>
<li><p>At the top of your browser, copy your Google Sheet address or URL (which usually ends in <code>...XYZ/edit#gid=0</code>), as shown in Figure <a href="leaflet-maps-with-google-sheets.html#fig:sheets-publish">13.5</a>. Do <em>NOT</em> copy the <em>Published to the web</em> address (which usually ends in <code>...XYZ/pubhtml</code>) because that link is slightly different and will not work in this template.</p></li>
</ol>

<div class="figure"><span id="fig:sheets-publish"></span>
<img src="images/13-leaflet/sheets-publish-annotated.png" alt="Copy the Google Sheet address at the top of the browser, NOT the Publish to the web address." width="500" />
<p class="caption">
Figure 13.5: Copy the Google Sheet address at the top of the browser, NOT the <em>Publish to the web</em> address.
</p>
</div>
</div>
<div id="c-paste-your-google-sheet-browser-address-in-two-places-in-your-github-repo" class="section level4 unnumbered" number="">
<h4>C) Paste your Google Sheet browser address in two places in your GitHub repo</h4>
<p>Our next task is to link your published Google Sheet to your Leaflet code in GitHub, so that it can pull your data from the Sheet to display on the map.</p>
<ol style="list-style-type: decimal">
<li><p>At the top of your GitHub repo, click to open the file named <code>google-doc-url.js</code>, and click the pencil symbol to edit it.</p></li>
<li><p>Paste <em>your</em> Google Sheet address or URL (which usually ends in <code>...XYZ/edit#gid=0</code>) to replace <em>our</em> existing URL, as shown in Figure <a href="leaflet-maps-with-google-sheets.html#fig:google-doc-url">13.6</a>. Be careful <em>NOT</em> to erase the single quotation marks or the semicolon at the end. Scroll down to <em>Commit</em> your changes. See separate instructions about the Google API key further below.</p></li>
</ol>

<div class="figure"><span id="fig:google-doc-url"></span>
<img src="images/13-leaflet/google-doc-url.png" alt="Paste in your Google Sheet URL to replace our URL."  />
<p class="caption">
Figure 13.6: Paste in <em>your</em> Google Sheet URL to replace <em>our</em> URL.
</p>
</div>
<ol start="3" style="list-style-type: decimal">
<li>Also, let’s paste your Google Sheet URL in second place to help you keep track of it. In your GitHub repo, click the README.md file to open it, click the pencil symbol to edit it, and paste <em>your</em> Google Sheet URL to replace <em>our</em> existing URL, as shown in Figure <a href="leaflet-maps-with-google-sheets.html#fig:leaflet-readme-link-bottom">13.7</a>. Scroll down to <em>Commit</em> your changes.</li>
</ol>

<div class="figure"><span id="fig:leaflet-readme-link-bottom"></span>
<img src="images/13-leaflet/leaflet-readme-link-bottom.png" alt="Edit your README file to replace the link to our site with the link to your site."  />
<p class="caption">
Figure 13.7: Edit your README file to replace the link to <em>our</em> site with the link to <em>your</em> site.
</p>
</div>
<p>Feel free to remove any other content on the README page that you do not wish to keep.</p>
</div>
<div id="d-update-your-google-sheet-options-tab-info-and-refresh-your-live-map" class="section level4 unnumbered" number="">
<h4>D) Update your Google Sheet <em>Options</em> tab info and refresh your live map</h4>
<p>Now that your published Google Sheet is linked to your live map, go to the <em>Options</em> tab to update any of these items:</p>
<ul>
<li>Map Title</li>
<li>Map Subtitle</li>
<li>Author Name</li>
<li>Author Email or Website</li>
<li>Author Code Repo</li>
</ul>
<p>Open the browser tab that displays your live map and refresh the page to see your changes. If your changes do not appear within a few seconds, see the <a href="fix.html">Fix Common Problems</a> section of the appendix.</p>
</div>
<div id="e-geocode-locations-and-customize-new-markers-in-the-points-tab" class="section level4 unnumbered" number="">
<h4>E) Geocode locations and customize new markers in the Points tab</h4>
<p>Now we can start to add new content to your map. In the <em>Points</em> tab of your Google Sheet, you’ll see column headers to organize and display interactive markers on your map. Replace the demonstration data with your own, but do <em>not</em> delete or rename the column headers, since the Leaflet code looks for these specific names.</p>
<ul>
<li>Group: Create any labels to categorize groups of markers in your legend.</li>
<li>Marker Icon: Insert any standard icon name (such as <code>school</code> or <code>bus</code>) that appears in the <a href="http://fontawesome.io/icons">Font Awesome Icons site</a>, or leave blank for no icon inside the marker. To create your own custom icon, see further below.</li>
<li>Marker Color: Insert any standard web color name such as <code>blue</code> or <code>darkblue</code>, or insert a web color code such as <code>#775307</code> or <code>rgba(200,100,0,0.5)</code>. See options at <a href="https://www.w3schools.com/colors/colors_names.asp">W3Schools Color Names</a>.</li>
<li>Icon Color: Set the color of the icon inside the marker. The default is <code>white</code>, which looks good inside darker-colored markers.</li>
<li>Custom Size: Leave blank, unless you are creating your own custom icon further below.</li>
</ul>
<p>The next set of columns include items that appear when users click on point markers:</p>
<ul>
<li>Name: Add a title to display in the marker pop-up window.</li>
<li>Description: Add text to appear in the marker pop-up window. You may insert HTML tags to add line breaks (such as <code>&lt;br&gt;</code>), or to open external links in a new tab, such as <code>&lt;a href='https://www.w3schools.com/' target='_blank'&gt;Visit W3Schools&lt;/a&gt;</code>. Learn about HTML syntax at <a href="https://www.w3schools.com/html/html_links.asp">W3Schools</a>.</li>
<li>Image: You have two options to display images. You can insert an external link to an image hosted by an online service (such as Flickr), as long as it begins with <code>https</code> (secure) and ends with either <code>.jpg</code> or <code>.png</code>. Or you can upload an image into the <code>media</code> subfolder in your GitHub repo, as shown in Figure <a href="leaflet-maps-with-google-sheets.html#fig:leaflet-media-upload">13.8</a>, and enter the pathname in the Google Sheet in this format: <code>media/image.jpg</code> or <code>...png</code>.</li>
</ul>

<div class="figure"><span id="fig:leaflet-media-upload"></span>
<img src="images/13-leaflet/leaflet-media-upload.png" alt="In GitHub, click to open the media folder and Add file - Upload files." width="400" />
<p class="caption">
Figure 13.8: In GitHub, click to open the <code>media</code> folder and <em>Add file - Upload files</em>.
</p>
</div>
<p>Warning: Media file pathnames are case-sensitive, and we recommend using <em>all lowercase characters</em>, including the suffix ending. Also, since the code template automatically resizes images to fit, we recommend that you <em>reduce the size</em> of any images to 600x400 pixels or less prior to uploading, to make sure your map operates smoothly.</p>
<ul>
<li>Location, Latitude, Longitude: These place your markers at points on the map. Although the code template only requires Latitude and Longitude, it’s wise to paste an address or place name into the Location column as a reminder to correspond with the numerical coordinates. Use the <a href="geocode.html">Geocoding by SmartMonkey Add-on from Chapter 3</a> and select <em>Add-ons &gt; Geocoding by SmartMonkey &gt; Geocode Details</em> to create a new sheet with sample data and display results for three new columns: <em>Latitude</em>, <em>Longitude</em>, and <em>Address found</em>, as shown in Figure <a href="leaflet-maps-with-google-sheets.html#fig:geocode-details2">13.9</a>. Paste in your own address data and repeat the step above to geocode it, then copy and paste the results into your <em>Points</em> sheet.</li>
</ul>

<div class="figure"><span id="fig:geocode-details2"></span>
<img src="images/13-leaflet/geocode-details.png" alt="Select Add-ons–Geocoding by SmartMonkey–Geocode Details to display sample data with results for three new columns: Latitude, Longitude, and Address found."  />
<p class="caption">
Figure 13.9: Select <em>Add-ons–Geocoding by SmartMonkey–Geocode Details</em> to display sample data with results for three new columns: <em>Latitude</em>, <em>Longitude</em>, and <em>Address found</em>.
</p>
</div>
<p>Optional table of viewable markers: To display an interactive table at the bottom of your map, as shown in Figure <a href="leaflet-maps-with-google-sheets.html#fig:leaflet-map-with-table">13.10</a>. In the <em>Options</em> tab, set <em>Display Table</em> (cell B30) to <em>On</em>. You can also adjust the <em>Table Height</em>, and modify the display of <em>Table Columns</em> by entering the column headers, separated with commas.</p>

<div class="figure"><span id="fig:leaflet-map-with-table"></span>
<img src="images/13-leaflet/leaflet-map-with-table.png" alt="Optional: display interactive table of viewable markers at the bottom of your map." width="500" />
<p class="caption">
Figure 13.10: Optional: display interactive table of viewable markers at the bottom of your map.
</p>
</div>
<p>Optional custom markers: To create your own custom marker, such as a thumbnail photo icon as shown in Figure <a href="leaflet-maps-with-google-sheets.html#fig:leaflet-map-custom-marker">13.11</a>, use any image editing tool to reduce a photo to a square of 64 x 64 pixels. Save it in PNG format and choose a filename using all lower-case characters with no spaces. Upload the image to the <em>media</em> folder in your GitHub repo as described above. In the Marker Icon column, enter the file pathname in this format: <code>media/image-thumbnail.png</code>. In the Custom Size column, set the dimensions to <code>64x64</code> or similar, such as <code>40x40</code> if desired.</p>

<div class="figure"><span id="fig:leaflet-map-custom-marker"></span>
<img src="images/13-leaflet/leaflet-map-custom-marker.png" alt="Optional: create and upload custom thumbnail map markers." width="600" />
<p class="caption">
Figure 13.11: Optional: create and upload custom thumbnail map markers.
</p>
</div>
<p>Open the browser tab that displays your live map and refresh the page to see your changes. If your changes do not appear within a few seconds, see the <a href="fix.html">Fix Common Problems</a> section of the appendix.</p>
</div>
<div id="f-remove-or-display-point-polygon-or-polylines-data-and-legends" class="section level4 unnumbered" number="">
<h4>F) Remove or display point, polygon, or polylines data and legends</h4>
<p>By default, the demo map displays three types of data—points, polygons, and polylines—and their legends. You can remove any of these from your map by modifying your linked Google Sheet:</p>
<p>To remove points:</p>
<ul>
<li>In the <em>Options</em> tab, set <em>Point Legend Position</em> (cell B27) to <em>Off</em> to hide it.</li>
<li>In the <em>Points</em> tab, delete all rows of point data.</li>
</ul>
<p>To remove polylines:</p>
<ul>
<li>In the <em>Options</em> tab, set <em>Polyline Legend Position</em> (cell B36) to <em>Off</em> to hide it.</li>
<li>In the <em>Polylines</em> tab, delete all rows of polyline data.</li>
</ul>
<p>To remove polygons:</p>
<ul>
<li>In the <em>Polygons</em> tab, set <em>Polygon Legend Position</em> (cell B4) to <em>Off</em> to hide it.</li>
<li>Also in the <em>Polygons</em> tab, set <em>Polygon GeoJSON URL</em> (cell B6) to remove that data from your map.</li>
<li>In the next tab <em>Polygons1</em>, use the tab drop-down menu to select <em>Delete</em> to remove the entire sheet.</li>
</ul>
<p>You’ve already learned how to add more markers in the <em>Points</em> tab as described above. But if you wish to add new polygon or polyline data, you’ll need to prepare those files in GeoJSON format using either the <a href="geojsonio.html">GeoJson.io tool tutorial</a> or the <a href="mapshaper.html">MapShaper tool tutorial</a> as described in Chapter 14.</p>
<p>After you’ve prepared your GeoJSON data, name the files using all lower-case characters and no spaces, and upload them into the <code>geojson</code> subfolder of your GitHub repo. Then update these settings in your linked Google Sheet:</p>
<p>To display polylines:</p>
<ul>
<li>In the <em>Options</em> tab, make sure <em>Polyline Legend Position</em> (cell B36) is visible by selecting <em>topleft</em> or a similar position.</li>
<li>In the <em>Polylines</em> tab, enter the GeoJSON URL pathname to the file you uploaded to your GitHub repo, such as <code>geodata/lines.geojson</code>. Then insert a Display Name, Description, and Color.</li>
</ul>
<p>To display polygons:</p>
<ul>
<li>In the <em>Polygons</em> tab, make sure <em>Polygon Legend Position</em> (cell B4) is visible by selecting <em>topleft</em> or a similar position.</li>
<li>In <em>Polygon GeoJSON URL</em> (cell B6) enter the pathname to the file you uploaded to your GitHub repo, such as <code>geodata/map.geojson</code>.</li>
<li>You can change the <em>Polygon Legend Title</em> (cell B3) and add an optional <em>Polygon Legend Icon</em> (cell B5).</li>
<li>Edit the <em>Polygon Data</em> and <em>Color Settings</em> sections to modify the labels and ranges to align with the properties of your GeoJSON file. In the <em>Property Range Color Palette</em>, you can automatically select a color scheme from the ColorBrewer tool we described in the <a href="map-design.html">Map Design section of Chapter 8</a>, or manually insert colors of your choice in the cell below.</li>
<li>Read the <em>Hints</em> column in the <em>Polygons</em> sheet for tips on how to enter data.</li>
<li>If you wish to display multiple polygon layers, use the <em>Polygons</em> tab drop-down menu to <em>Duplicate</em> the sheet, and name additional sheets in this format: <em>Polygons1</em>, <em>Polygons2</em>, etc.</li>
</ul>
</div>
</div>
<div id="finalize-your-map-before-sharing-with-the-public" class="section level3 unnumbered" number="">
<h3>Finalize Your Map Before Sharing with the Public</h3>
<p>Now you’re ready to finalize your map. If you wish to share your map link with the public, read the options below and choose either step G <em>OR</em> step H.</p>
<p>Warning: We reserve the right to change <em>our</em> Google Sheets API key at any time, especially if other people overuse or abuse it. This means that you <em>must</em> finalize your map using either step G or H below before sharing it publicly, because it will <em>stop working</em> if we change our key.</p>
<div id="g-save-each-google-sheets-tab-as-a-csv-file-and-upload-to-github" class="section level4 unnumbered" number="">
<h4>G) Save each Google Sheets tab as a CSV file and upload to GitHub</h4>
<p>If you have finished entering most of your data into your Google Sheets, downloading them into separate CSV files and uploading those into your GitHub repo is the <em>best</em> long-term preservation strategy. This approach keeps your map and data together in the same GitHub repo, and removes the risk that your map will break due to an interruption to Google services. Plus, you can still edit your map data. If this approach makes sense, follow these steps:</p>
<ol style="list-style-type: decimal">
<li>In your Google Sheets, go to each tab and select <em>File &gt; Download</em> into CSV format, as shown in Figure <a href="leaflet-maps-with-google-sheets.html#fig:sheets-download-csv">13.12</a>, to create a separate file for each tab.</li>
</ol>

<div class="figure"><span id="fig:sheets-download-csv"></span>
<img src="images/13-leaflet/sheets-download-csv.png" alt="Download each Google Sheets tab as a separate CSV file." width="350" />
<p class="caption">
Figure 13.12: Download each Google Sheets tab as a separate CSV file.
</p>
</div>
<ol start="2" style="list-style-type: decimal">
<li>Shorten each file name as shown. The names must be exact, but they are <em>not</em> case-sensitive. Only the first file below (Options.csv) is required, and others are optional, depending on your data.</li>
</ol>
<ul>
<li>Options.csv</li>
<li>Points.csv</li>
<li>Polylines.csv</li>
<li>Polygons.csv (If additional files, name them: Polygons1.csv, Polygons2.csv, etc.)</li>
<li>Notes.csv (or .txt) Recommended to keep any notes with your data, but not required.</li>
</ul>
<ol start="3" style="list-style-type: decimal">
<li>In your GitHub repo, click the <code>csv</code> subfolder to open it, select <em>Add file &gt; Upload files</em>, and upload all of the CSV files above into this subfolder, as shown in Figure <a href="leaflet-maps-with-google-sheets.html#fig:leaflet-upload-csv">13.13</a>. The Leaflet template code checks here first for data, and if it finds CSV files with the names above, it will pull the map data directly from them, instead of your Google Sheets. <em>Remember</em> that from this point forward, any edits in your Google Sheet will <em>no longer appear automatically</em> in your map.</li>
</ol>

<div class="figure"><span id="fig:leaflet-upload-csv"></span>
<img src="images/13-leaflet/leaflet-upload-csv.png" alt="Upload your map data files into the csv subfolder in GitHub." width="400" />
<p class="caption">
Figure 13.13: Upload your map data files into the <em>csv</em> subfolder in GitHub.
</p>
</div>
<ol start="4" style="list-style-type: decimal">
<li>If you wish to edit your map after uploading your CSV files, you have two options. You can make small edits directly to your CSV files by opening them in the GitHub web interface. Or you can make larger edits in the Google Sheet, and repeating the steps above to download them in CSV format and upload them to replace your existing files on GitHub.</li>
</ol>
</div>
<div id="h-get-your-own-google-sheets-api-key-to-insert-into-the-code" class="section level4 unnumbered" number="">
<h4>H) Get your own Google Sheets API Key to insert into the code</h4>
<p>As an alternative to step G, if you wish to continue to store your map data in your Google Sheets that is published online, go to the section of this chapter titled <a href="google-sheets-api-key.html">Get Your Own Google Sheets API Key</a>, and insert it into the Leaflet map code as described, to avoid overusing our key. Google Sheets requires an API key to maintain reasonable <a href="https://developers.google.com/sheets/api/limits">usage limits</a> on its service. You can get a free Google Sheets API key if you have a personal Google account, but <em>not</em> a Google Suite account provided by your school or business.</p>
<p>If problems arise, see the <a href="fix.html">Fix Common Mistakes</a> section of the appendix.</p>
</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="leaflet.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="leaflet-storymaps-with-google-sheets.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": true,
"facebook": false,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": false
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": "https://github.com/handsondataviz/book/blob/master/13-leaflet.Rmd",
"text": null
},
"download": ["HandsOnDataViz.pdf"],
"toc": {
"collapse": "section",
"scroll_highlight": true
},
"search": true
});
});
</script>

</body>

</html>
