<!DOCTYPE html>
<html lang="en" xml:lang="en">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Leaflet Storymaps with Google Sheets | Hands-On Data Visualization</title>
  <meta name="description" content="Tell your story and show it with data, using free and easy-to-learn tools on the web. This introductory book teaches you how to design interactive charts and customized maps for your website, beginning with easy drag-and-drop tools, such as Google Sheets, Datawrapper, and Tableau Public. You will also gradually learn how to edit open-source code templates built with Chart.js, Highcharts, and Leaflet on GitHub. Follow along with the step-by-step tutorials, real-world examples, and online resources. This book is ideal for students, non-profit organizations, small business owners, local governments, journalists, academics, or anyone who wants to tell their story and show the data. No coding experience is required." />
  <meta name="generator" content="bookdown 0.22 and GitBook 2.6.7" />

  <meta property="og:title" content="Leaflet Storymaps with Google Sheets | Hands-On Data Visualization" />
  <meta property="og:type" content="book" />
  <meta property="og:url" content="http://handsondataviz.github.io/" />
  <meta property="og:image" content="http://handsondataviz.github.io//images/cover-400wide.jpg" />
  <meta property="og:description" content="Tell your story and show it with data, using free and easy-to-learn tools on the web. This introductory book teaches you how to design interactive charts and customized maps for your website, beginning with easy drag-and-drop tools, such as Google Sheets, Datawrapper, and Tableau Public. You will also gradually learn how to edit open-source code templates built with Chart.js, Highcharts, and Leaflet on GitHub. Follow along with the step-by-step tutorials, real-world examples, and online resources. This book is ideal for students, non-profit organizations, small business owners, local governments, journalists, academics, or anyone who wants to tell their story and show the data. No coding experience is required." />
  <meta name="github-repo" content="handsondataviz/book" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Leaflet Storymaps with Google Sheets | Hands-On Data Visualization" />
  <meta name="twitter:site" content="@handsondataviz" />
  <meta name="twitter:description" content="Tell your story and show it with data, using free and easy-to-learn tools on the web. This introductory book teaches you how to design interactive charts and customized maps for your website, beginning with easy drag-and-drop tools, such as Google Sheets, Datawrapper, and Tableau Public. You will also gradually learn how to edit open-source code templates built with Chart.js, Highcharts, and Leaflet on GitHub. Follow along with the step-by-step tutorials, real-world examples, and online resources. This book is ideal for students, non-profit organizations, small business owners, local governments, journalists, academics, or anyone who wants to tell their story and show the data. No coding experience is required." />
  <meta name="twitter:image" content="http://handsondataviz.github.io//images/cover-400wide.jpg" />

<meta name="author" content="Jack Dougherty" />
<meta name="author" content="Ilya Ilyankou" />


<meta name="date" content="2021-10-30" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  <link rel="shortcut icon" href="images/favicon.png" type="image/x-icon" />
<link rel="prev" href="leaflet-maps-with-google-sheets.html"/>
<link rel="next" href="google-sheets-api-key.html"/>
<script src="libs/header-attrs-2.9/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-5488840-29"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-5488840-29');
</script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="css/style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./"><strong>Hands-On Data Visualization</strong><br>by Jack Dougherty & Ilya Ilyankou</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a>
<ul>
<li class="chapter" data-level="" data-path="audience-overview.html"><a href="audience-overview.html"><i class="fa fa-check"></i>Audience and Overview</a></li>
<li class="chapter" data-level="" data-path="authors.html"><a href="authors.html"><i class="fa fa-check"></i>Authors &amp; Acknowledgements</a></li>
<li class="chapter" data-level="" data-path="open-access.html"><a href="open-access.html"><i class="fa fa-check"></i>About Open-Access Web Edition: Why and How</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i>Introduction: Why Data Visualization?</a>
<ul>
<li class="chapter" data-level="" data-path="believe.html"><a href="believe.html"><i class="fa fa-check"></i>What Can You Believe?</a></li>
<li class="chapter" data-level="" data-path="persuasive.html"><a href="persuasive.html"><i class="fa fa-check"></i>Some Pictures Are More Persuasive</a></li>
<li class="chapter" data-level="" data-path="shades.html"><a href="shades.html"><i class="fa fa-check"></i>Different Shades of the Truth</a></li>
<li class="chapter" data-level="" data-path="organization.html"><a href="organization.html"><i class="fa fa-check"></i>Organization of the Book</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="choose.html"><a href="choose.html"><i class="fa fa-check"></i><b>1</b> Choose Tools to Tell Your Story</a>
<ul>
<li class="chapter" data-level="" data-path="sketch.html"><a href="sketch.html"><i class="fa fa-check"></i>Start Sketching Your Data Story</a></li>
<li class="chapter" data-level="" data-path="tool-factors.html"><a href="tool-factors.html"><i class="fa fa-check"></i>Ten Factors When Considering Tools</a></li>
<li class="chapter" data-level="" data-path="recommended-tools.html"><a href="recommended-tools.html"><i class="fa fa-check"></i>Our Recommended Tools</a></li>
<li class="chapter" data-level="" data-path="password-manager.html"><a href="password-manager.html"><i class="fa fa-check"></i>Use a Password Manager</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="spreadsheet.html"><a href="spreadsheet.html"><i class="fa fa-check"></i><b>2</b> Strengthen Your Spreadsheet Skills</a>
<ul>
<li class="chapter" data-level="" data-path="spreadsheet-tools.html"><a href="spreadsheet-tools.html"><i class="fa fa-check"></i>Select your Spreadsheet Tools</a></li>
<li class="chapter" data-level="" data-path="csv.html"><a href="csv.html"><i class="fa fa-check"></i>Download to CSV or ODS Format</a></li>
<li class="chapter" data-level="" data-path="copy.html"><a href="copy.html"><i class="fa fa-check"></i>Make a Copy of a Google Sheet</a></li>
<li class="chapter" data-level="" data-path="share.html"><a href="share.html"><i class="fa fa-check"></i>Share Your Google Sheets</a></li>
<li class="chapter" data-level="" data-path="upload.html"><a href="upload.html"><i class="fa fa-check"></i>Upload and Convert to Google Sheets</a></li>
<li class="chapter" data-level="" data-path="geocode.html"><a href="geocode.html"><i class="fa fa-check"></i>Geocode Addresses in Google Sheets</a></li>
<li class="chapter" data-level="" data-path="forms.html"><a href="forms.html"><i class="fa fa-check"></i>Collect Data with Google Forms</a></li>
<li class="chapter" data-level="" data-path="sort.html"><a href="sort.html"><i class="fa fa-check"></i>Sort and Filter Data</a></li>
<li class="chapter" data-level="" data-path="calculate.html"><a href="calculate.html"><i class="fa fa-check"></i>Calculate with Formulas</a></li>
<li class="chapter" data-level="" data-path="pivot.html"><a href="pivot.html"><i class="fa fa-check"></i>Summarize Data with Pivot Tables</a></li>
<li class="chapter" data-level="" data-path="vlookup.html"><a href="vlookup.html"><i class="fa fa-check"></i>Match Columns with VLOOKUP</a></li>
<li class="chapter" data-level="" data-path="database.html"><a href="database.html"><i class="fa fa-check"></i>Spreadsheet vs. Relational Database</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="find.html"><a href="find.html"><i class="fa fa-check"></i><b>3</b> Find and Question Your Data</a>
<ul>
<li class="chapter" data-level="" data-path="guiding.html"><a href="guiding.html"><i class="fa fa-check"></i>Guiding Questions for Your Search</a></li>
<li class="chapter" data-level="" data-path="public.html"><a href="public.html"><i class="fa fa-check"></i>Public and Private Data</a></li>
<li class="chapter" data-level="" data-path="mask-aggregate.html"><a href="mask-aggregate.html"><i class="fa fa-check"></i>Mask or Aggregate Sensitive Data</a></li>
<li class="chapter" data-level="" data-path="opendata.html"><a href="opendata.html"><i class="fa fa-check"></i>Open Data Repositories</a></li>
<li class="chapter" data-level="" data-path="source.html"><a href="source.html"><i class="fa fa-check"></i>Source Your Data</a></li>
<li class="chapter" data-level="" data-path="bad-data.html"><a href="bad-data.html"><i class="fa fa-check"></i>Recognize Bad Data</a></li>
<li class="chapter" data-level="" data-path="question.html"><a href="question.html"><i class="fa fa-check"></i>Question Your Data</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="clean.html"><a href="clean.html"><i class="fa fa-check"></i><b>4</b> Clean Up Messy Data</a>
<ul>
<li class="chapter" data-level="" data-path="smart-cleanup.html"><a href="smart-cleanup.html"><i class="fa fa-check"></i>Smart Cleanup with Google Sheets</a></li>
<li class="chapter" data-level="" data-path="find-and-replace.html"><a href="find-and-replace.html"><i class="fa fa-check"></i>Find and Replace with Blank</a></li>
<li class="chapter" data-level="" data-path="transpose.html"><a href="transpose.html"><i class="fa fa-check"></i>Transpose Rows and Columns</a></li>
<li class="chapter" data-level="" data-path="split-data.html"><a href="split-data.html"><i class="fa fa-check"></i>Split Data into Separate Columns</a></li>
<li class="chapter" data-level="" data-path="combine-data.html"><a href="combine-data.html"><i class="fa fa-check"></i>Combine Data into One Column</a></li>
<li class="chapter" data-level="" data-path="numbers-to-text.html"><a href="numbers-to-text.html"><i class="fa fa-check"></i>Numbers-to-Text and Remove Characters</a></li>
<li class="chapter" data-level="" data-path="tabula.html"><a href="tabula.html"><i class="fa fa-check"></i>Extract Tables from PDFs with Tabula</a></li>
<li class="chapter" data-level="" data-path="open-refine.html"><a href="open-refine.html"><i class="fa fa-check"></i>Clean Data with OpenRefine</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="comparisons.html"><a href="comparisons.html"><i class="fa fa-check"></i><b>5</b> Make Meaningful Comparisons</a>
<ul>
<li class="chapter" data-level="" data-path="describe-comparisons.html"><a href="describe-comparisons.html"><i class="fa fa-check"></i>Precisely Describe Comparisons</a></li>
<li class="chapter" data-level="" data-path="normalize.html"><a href="normalize.html"><i class="fa fa-check"></i>Normalize Your Data</a></li>
<li class="chapter" data-level="" data-path="biased-comparisons.html"><a href="biased-comparisons.html"><i class="fa fa-check"></i>Beware of Biased Comparisons</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="chart.html"><a href="chart.html"><i class="fa fa-check"></i><b>6</b> Chart Your Data</a>
<ul>
<li class="chapter" data-level="" data-path="chart-design.html"><a href="chart-design.html"><i class="fa fa-check"></i>Chart Design Principles</a></li>
<li class="chapter" data-level="" data-path="chart-google.html"><a href="chart-google.html"><i class="fa fa-check"></i>Google Sheets Charts</a></li>
<li class="chapter" data-level="" data-path="bar-column-google.html"><a href="bar-column-google.html"><i class="fa fa-check"></i>- Bar and Column Charts</a></li>
<li class="chapter" data-level="" data-path="histogram-google.html"><a href="histogram-google.html"><i class="fa fa-check"></i>- Histograms</a></li>
<li class="chapter" data-level="" data-path="pie-line-area-google.html"><a href="pie-line-area-google.html"><i class="fa fa-check"></i>- Pie, Line, and Area Charts</a></li>
<li class="chapter" data-level="" data-path="chart-datawrapper.html"><a href="chart-datawrapper.html"><i class="fa fa-check"></i>Datawrapper Charts</a></li>
<li class="chapter" data-level="" data-path="annotated-datawrapper.html"><a href="annotated-datawrapper.html"><i class="fa fa-check"></i>- Annotated Charts</a></li>
<li class="chapter" data-level="" data-path="range-datawrapper.html"><a href="range-datawrapper.html"><i class="fa fa-check"></i>- Range Charts</a></li>
<li class="chapter" data-level="" data-path="scatter-bubble-datawrapper.html"><a href="scatter-bubble-datawrapper.html"><i class="fa fa-check"></i>- Scatter and Bubble Charts</a></li>
<li class="chapter" data-level="" data-path="chart-tableau.html"><a href="chart-tableau.html"><i class="fa fa-check"></i>Tableau Public Charts</a></li>
<li class="chapter" data-level="" data-path="scatter-tableau.html"><a href="scatter-tableau.html"><i class="fa fa-check"></i>- Scatter Chart</a></li>
<li class="chapter" data-level="" data-path="filtered-line-tableau.html"><a href="filtered-line-tableau.html"><i class="fa fa-check"></i>- Filtered Line Chart</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="map.html"><a href="map.html"><i class="fa fa-check"></i><b>7</b> Map Your Data</a>
<ul>
<li class="chapter" data-level="" data-path="map-design.html"><a href="map-design.html"><i class="fa fa-check"></i>Map Design Principles</a></li>
<li class="chapter" data-level="" data-path="design-choropleth.html"><a href="design-choropleth.html"><i class="fa fa-check"></i>Design Choropleth Colors &amp; Intervals</a></li>
<li class="chapter" data-level="" data-path="normalize-choropleth.html"><a href="normalize-choropleth.html"><i class="fa fa-check"></i>Normalize Choropleth Map Data</a></li>
<li class="chapter" data-level="" data-path="mymaps.html"><a href="mymaps.html"><i class="fa fa-check"></i>Point Map with Google My Maps</a></li>
<li class="chapter" data-level="" data-path="locatormap-datawrapper.html"><a href="locatormap-datawrapper.html"><i class="fa fa-check"></i>Locator Map with Datawrapper</a></li>
<li class="chapter" data-level="" data-path="symbolmap-datawrapper.html"><a href="symbolmap-datawrapper.html"><i class="fa fa-check"></i>Symbol Point Map with Datawrapper</a></li>
<li class="chapter" data-level="" data-path="choropleth-datawrapper.html"><a href="choropleth-datawrapper.html"><i class="fa fa-check"></i>Choropleth Map with Datawrapper</a></li>
<li class="chapter" data-level="" data-path="map-tableau.html"><a href="map-tableau.html"><i class="fa fa-check"></i>Choropleth Map with Tableau Public</a></li>
<li class="chapter" data-level="" data-path="map-socrata.html"><a href="map-socrata.html"><i class="fa fa-check"></i>Current Map with Socrata Open Data</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="table.html"><a href="table.html"><i class="fa fa-check"></i><b>8</b> Table Your Data</a>
<ul>
<li class="chapter" data-level="" data-path="table-design.html"><a href="table-design.html"><i class="fa fa-check"></i>Table Design Principles</a></li>
<li class="chapter" data-level="" data-path="table-datawrapper.html"><a href="table-datawrapper.html"><i class="fa fa-check"></i>Datawrapper Table with Sparklines</a></li>
<li class="chapter" data-level="" data-path="other-table-tools.html"><a href="other-table-tools.html"><i class="fa fa-check"></i>Other Table-Making Tools</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="embed.html"><a href="embed.html"><i class="fa fa-check"></i><b>9</b> Embed On the Web</a>
<ul>
<li class="chapter" data-level="" data-path="static.html"><a href="static.html"><i class="fa fa-check"></i>Static Image vs Interactive iframe</a></li>
<li class="chapter" data-level="" data-path="embed-code.html"><a href="embed-code.html"><i class="fa fa-check"></i>Get the Embed Code or iframe Tag</a></li>
<li class="chapter" data-level="" data-path="paste-code.html"><a href="paste-code.html"><i class="fa fa-check"></i>Paste Code or iframe to Website</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="github.html"><a href="github.html"><i class="fa fa-check"></i><b>10</b> Edit and Host Code with GitHub</a>
<ul>
<li class="chapter" data-level="" data-path="copy-leaflet.html"><a href="copy-leaflet.html"><i class="fa fa-check"></i>Copy, Edit, and Host a Simple Leaflet Map Template</a></li>
<li class="chapter" data-level="" data-path="gh-pages-link-to-iframe.html"><a href="gh-pages-link-to-iframe.html"><i class="fa fa-check"></i>Convert GitHub Pages Link to iframe</a></li>
<li class="chapter" data-level="" data-path="create-repo.html"><a href="create-repo.html"><i class="fa fa-check"></i>Create a New Repo and Upload Files on GitHub</a></li>
<li class="chapter" data-level="" data-path="github-desktop-atom.html"><a href="github-desktop-atom.html"><i class="fa fa-check"></i>GitHub Desktop and Atom Editor to Code Efficiently</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="chartcode.html"><a href="chartcode.html"><i class="fa fa-check"></i><b>11</b> Chart.js and Highcharts Templates</a>
<ul>
<li class="chapter" data-level="" data-path="chartjs-bar-column.html"><a href="chartjs-bar-column.html"><i class="fa fa-check"></i>Bar or Column Chart with Chart.js</a></li>
<li class="chapter" data-level="" data-path="chartjs-error-bars.html"><a href="chartjs-error-bars.html"><i class="fa fa-check"></i>Error Bars with Chart.js</a></li>
<li class="chapter" data-level="" data-path="chartjs-line.html"><a href="chartjs-line.html"><i class="fa fa-check"></i>Line Chart with Chart.js</a></li>
<li class="chapter" data-level="" data-path="highcharts-annotated-line.html"><a href="highcharts-annotated-line.html"><i class="fa fa-check"></i>Annotated Line Chart with Highcharts</a></li>
<li class="chapter" data-level="" data-path="chartjs-scatter.html"><a href="chartjs-scatter.html"><i class="fa fa-check"></i>Scatter Chart with Chart.js</a></li>
<li class="chapter" data-level="" data-path="chartjs-bubble.html"><a href="chartjs-bubble.html"><i class="fa fa-check"></i>Bubble Chart with Chart.js</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="leaflet.html"><a href="leaflet.html"><i class="fa fa-check"></i><b>12</b> Leaflet Map Templates</a>
<ul>
<li class="chapter" data-level="" data-path="leaflet-maps-with-google-sheets.html"><a href="leaflet-maps-with-google-sheets.html"><i class="fa fa-check"></i>Leaflet Maps with Google Sheets</a></li>
<li class="chapter" data-level="" data-path="leaflet-storymaps-with-google-sheets.html"><a href="leaflet-storymaps-with-google-sheets.html"><i class="fa fa-check"></i>Leaflet Storymaps with Google Sheets</a></li>
<li class="chapter" data-level="" data-path="google-sheets-api-key.html"><a href="google-sheets-api-key.html"><i class="fa fa-check"></i>Get Your Google Sheets API Key</a></li>
<li class="chapter" data-level="" data-path="leaflet-maps-with-csv.html"><a href="leaflet-maps-with-csv.html"><i class="fa fa-check"></i>Leaflet Maps with CSV Data</a></li>
<li class="chapter" data-level="" data-path="leaflet-heatmap.html"><a href="leaflet-heatmap.html"><i class="fa fa-check"></i>Leaflet Heatmap Points with CSV Data</a></li>
<li class="chapter" data-level="" data-path="leaflet-searchable-map.html"><a href="leaflet-searchable-map.html"><i class="fa fa-check"></i>Leaflet Searchable Point Map</a></li>
<li class="chapter" data-level="" data-path="leaflet-maps-open-data-apis.html"><a href="leaflet-maps-open-data-apis.html"><i class="fa fa-check"></i>Leaflet Maps with Open Data APIs</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="transform.html"><a href="transform.html"><i class="fa fa-check"></i><b>13</b> Transform Your Map Data</a>
<ul>
<li class="chapter" data-level="" data-path="geojson.html"><a href="geojson.html"><i class="fa fa-check"></i>Geospatial Data and GeoJSON</a></li>
<li class="chapter" data-level="" data-path="find-geojson.html"><a href="find-geojson.html"><i class="fa fa-check"></i>Find GeoJSON Boundary Files</a></li>
<li class="chapter" data-level="" data-path="geojsonio.html"><a href="geojsonio.html"><i class="fa fa-check"></i>Draw and Edit with GeoJson.io</a></li>
<li class="chapter" data-level="" data-path="mapshaper.html"><a href="mapshaper.html"><i class="fa fa-check"></i>Edit and Join with Mapshaper</a></li>
<li class="chapter" data-level="" data-path="convert-kmz.html"><a href="convert-kmz.html"><i class="fa fa-check"></i>Convert Compressed KMZ to KML</a></li>
<li class="chapter" data-level="" data-path="mapwarper.html"><a href="mapwarper.html"><i class="fa fa-check"></i>Georeference with Map Warper</a></li>
<li class="chapter" data-level="" data-path="bulk-geocode.html"><a href="bulk-geocode.html"><i class="fa fa-check"></i>Bulk Geocode with US Census</a></li>
<li class="chapter" data-level="" data-path="pivot-point-to-polygon.html"><a href="pivot-point-to-polygon.html"><i class="fa fa-check"></i>Pivot Points into Polygon Data</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="detect.html"><a href="detect.html"><i class="fa fa-check"></i><b>14</b> Detect Lies and Reduce Bias</a>
<ul>
<li class="chapter" data-level="" data-path="how-to-lie-with-charts.html"><a href="how-to-lie-with-charts.html"><i class="fa fa-check"></i>How to Lie with Charts</a></li>
<li class="chapter" data-level="" data-path="how-to-lie-with-maps.html"><a href="how-to-lie-with-maps.html"><i class="fa fa-check"></i>How to Lie with Maps</a></li>
<li class="chapter" data-level="" data-path="data-bias.html"><a href="data-bias.html"><i class="fa fa-check"></i>Recognize and Reduce Data Bias</a></li>
<li class="chapter" data-level="" data-path="spatial-bias.html"><a href="spatial-bias.html"><i class="fa fa-check"></i>Recognize and Reduce Spatial Bias</a></li>
</ul></li>
<li class="chapter" data-level="15" data-path="story.html"><a href="story.html"><i class="fa fa-check"></i><b>15</b> Tell and Show Your Data Story</a>
<ul>
<li class="chapter" data-level="" data-path="storyboard.html"><a href="storyboard.html"><i class="fa fa-check"></i>Build a Narrative on a Storyboard</a></li>
<li class="chapter" data-level="" data-path="draw-attention.html"><a href="draw-attention.html"><i class="fa fa-check"></i>Draw Attention to Meaning</a></li>
<li class="chapter" data-level="" data-path="sources-uncertainty.html"><a href="sources-uncertainty.html"><i class="fa fa-check"></i>Acknowledge Sources &amp; Uncertainty</a></li>
<li class="chapter" data-level="" data-path="story-format.html"><a href="story-format.html"><i class="fa fa-check"></i>Decide On Your Data Story Format</a></li>
</ul></li>
<li class="appendix"><span><b>Appendix</b></span></li>
<li class="chapter" data-level="A" data-path="fix.html"><a href="fix.html"><i class="fa fa-check"></i><b>A</b> Fix Common Problems</a>
<ul>
<li class="chapter" data-level="A.1" data-path="fix-tool.html"><a href="fix-tool.html"><i class="fa fa-check"></i><b>A.1</b> Tool or platform problems</a></li>
<li class="chapter" data-level="A.2" data-path="fix-browser.html"><a href="fix-browser.html"><i class="fa fa-check"></i><b>A.2</b> Try a different browser</a></li>
<li class="chapter" data-level="A.3" data-path="fix-developer-tools.html"><a href="fix-developer-tools.html"><i class="fa fa-check"></i><b>A.3</b> Diagnose with developer tools</a></li>
<li class="chapter" data-level="A.4" data-path="fix-computer.html"><a href="fix-computer.html"><i class="fa fa-check"></i><b>A.4</b> Mac or Chromebook problems</a></li>
<li class="chapter" data-level="A.5" data-path="fix-data.html"><a href="fix-data.html"><i class="fa fa-check"></i><b>A.5</b> Watch out for bad data</a></li>
<li class="chapter" data-level="A.6" data-path="fix-iframe.html"><a href="fix-iframe.html"><i class="fa fa-check"></i><b>A.6</b> Common iframe errors</a></li>
<li class="chapter" data-level="A.7" data-path="fix-code.html"><a href="fix-code.html"><i class="fa fa-check"></i><b>A.7</b> Fix your code on GitHub</a></li>
</ul></li>
<li class="chapter" data-level="B" data-path="bookdown.html"><a href="bookdown.html"><i class="fa fa-check"></i><b>B</b> Publishing with Bookdown</a>
<ul>
<li class="chapter" data-level="" data-path="install.html"><a href="install.html"><i class="fa fa-check"></i>Install and Set Up Bookdown</a></li>
<li class="chapter" data-level="" data-path="structure.html"><a href="structure.html"><i class="fa fa-check"></i>File Structure and Headers</a></li>
<li><a href="style-guide.html#style-guide">Style Guide for <em>Hands-On Data Visualization</em></a></li>
<li class="chapter" data-level="" data-path="images.html"><a href="images.html"><i class="fa fa-check"></i>Images and R Code-chunk Formatting</a></li>
<li class="chapter" data-level="" data-path="tables.html"><a href="tables.html"><i class="fa fa-check"></i>Tables in Markdown Format</a></li>
<li class="chapter" data-level="" data-path="zotero.html"><a href="zotero.html"><i class="fa fa-check"></i>Zotero and Better BibTeX for Notes and Biblio</a></li>
<li class="chapter" data-level="" data-path="alternative.html"><a href="alternative.html"><i class="fa fa-check"></i>Alternative Book Publishing Tools</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li style="padding: 10px 15px; font-weight: bold;">Open-access web edition</li>
<li><a rel="license" href="http://creativecommons.org/licenses/by-nc-nd/4.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-nd/4.0/88x31.png" /></a></li>
<li><a href="https://bookdown.org" target="_blank">Built with Bookdown + RStudio</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Hands-On Data Visualization</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="leaflet-storymaps-with-google-sheets" class="section level2 unnumbered">
<h2>Leaflet Storymaps with Google Sheets</h2>
<p>The Leaflet Storymaps code template is designed to show a point-by-point guided tour, with a scrolling narrative to display text, images, audio, video, and scanned map backgrounds, as shown in Figure <a href="leaflet-storymaps-with-google-sheets.html#fig:storymap-demo">12.15</a>. You enter all of your map data into a linked Google Sheet (or CSV file) or upload it into a GitHub repository, as shown in Figure <a href="leaflet-storymaps-with-google-sheets.html#fig:storymap-sheet">12.16</a>. In addition, the Leaflet Storymaps template allows you to customize the appearance of your data, and to add more layers, such as historical maps and geographic boundaries, which you’ll learn how to prepare in <a href="transform.html">Chapter 13: Transform Your Map Data</a>. Furthermore, the storymap design is responsive, so that it appears top-and-bottom on smaller screens (where width is less than 768 pixels), and automatically switches to side-by-side on larger ones. Finally, the Leaflet template is built on flexible open-source software that’s written primarily in JavaScript, a very common coding language for the web, so you can customize it further if you have skills or support from a developer.</p>

<div class="figure"><span id="fig:storymap-demo"></span>
<iframe src="images/12-leaflet/storymap-demo.gif" width="672" height="400px">
</iframe>
<p class="caption">
Figure 12.15: Explore the <a href="https://handsondataviz.github.io/leaflet-storymaps-with-google-sheets/">interactive Leaflet Storymaps with Google Sheets</a>. This demo version illustrates features of the code template while telling a brief story about the US National Mall in Washington, DC.
</p>
</div>

<div class="figure"><span id="fig:storymap-sheet"></span>
<iframe src="https://docs.google.com/spreadsheets/d/e/2PACX-1vSqxGs67j80rAPDZdQaS5jI0avn1qs2y5N8fOaeHUGvyrnIwBmWomlfAuujtvPrxtF-5FBZxi_KdTUm/pubhtml?widget=true&amp;amp;headers=false" width="672" height="500px">
</iframe>
<p class="caption">
Figure 12.16: View the <a href="https://docs.google.com/spreadsheets/d/1AO6XHL_0JafWZF4KEejkdDNqfuZWUk3SlNlQ6MjlRFM/">online Google Sheet template</a> that feeds data into the Leaflet Storymaps demo above.
</p>
</div>
<p>We created Leaflet Storymaps with Google Sheets to fill a gap that was not addressed by other tools. To be clear, other story map platforms are easier for beginners to start using right away, such as the free and open-source <a href="https://storymap.knightlab.com/">Knight Lab StoryMap platform</a>, and also the subscriber-only proprietary <a href="https://storymaps.arcgis.com">ArcGIS StoryMaps platform</a>, successor to the <a href="https://storymaps-classic.arcgis.com/">older Esri Story Maps platform</a>. But we do not recommend either of them because both lack <em>data portability</em>, meaning that you can’t easily export any data or images you enter, something we cautioned you to watch out for when we discussed <a href="choose.html">how to choose tools wisely in Chapter 1</a>. By contrast, all of the data you enter into the Leaflet Storymaps linked Google Sheet and GitHub repo can easily be migrated to other platforms, as visualization technology continues to evolve in the future.</p>
<p>Explore the Gallery of Leaflet Storymaps with Google Sheets in Table <a href="leaflet-storymaps-with-google-sheets.html#tab:storymaps-gallery">12.2</a> to see what other people created with this template.</p>
<table>
<caption><span id="tab:storymaps-gallery">Table 12.2: </span> Gallery of Leaflet Storymaps with Google Sheets</caption>
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<tbody>
<tr class="odd">
<td><img src="images/12-leaflet/storymaps-gallery-1.png" /><br><a href="https://jhsgh.org/synagogue-map/">Synagogue Map, Past and Present</a> by Elizabeth Rose, Jewish Historical Society of Greater Hartford</td>
<td><img src="images/12-leaflet/storymaps-gallery-2.png" /><br><a href="https://www.mappingtheuppermissouri.com/">Mapping the Upper Missouri</a> by Jen Andrella</td>
</tr>
<tr class="even">
<td><img src="images/12-leaflet/storymaps-gallery-3.png" /><br><a href="https://kensingtonremembers.org">Kensington Remembers</a> by Gordon Coonfield, Erica Hayes, James Parente, David Uspal, Cheyenne Zaremba</td>
<td><img src="images/12-leaflet/storymaps-gallery-4.png" /><br><a href="https://www.weneedtotalkabouttheborder.eu">We Need to Talk about the Border</a> by Elisabeth Blanchet and Laurent Gontier</td>
</tr>
</tbody>
</table>
<div id="tutorial-requirements-and-overview-1" class="section level3 unnumbered">
<h3>Tutorial Requirements and Overview</h3>
<p>Before you begin, you must have a <a href="https://drive.google.com">Google Drive account</a> and know how to <a href="copy.html">Make a Copy in Google Sheets as described in Chapter 2</a>. Also, you must have a <a href="https://github.com">GitHub account</a> and know how to <a href="github.html">Edit and Host Code with GitHub as described in Chapter 10</a>. We omitted some screenshots below that illustrate steps we previously covered, so if you get lost, go back to those chapters.</p>
<p>Tip: You’ll notice that this tutorial outline is very similar to the one in the previous section, but the links in the first part are different, and several steps in the second part are new.</p>
<p>Since this tutorial involves multiple steps, we created this outline to provide a broad overview. In the first part, you will create and publish your copies of two templates, one for GitHub and another for its linked Google Sheet.</p>
<ul>
<li><ol style="list-style-type: upper-alpha">
<li>Copy the GitHub template and publish your version with GitHub Pages.</li>
</ol></li>
<li><ol start="2" style="list-style-type: upper-alpha">
<li>File &gt; Make a Copy of Google Sheet template, Share, and Publish.</li>
</ol></li>
<li><ol start="3" style="list-style-type: upper-alpha">
<li>Paste your Google Sheet browser address in two places in your GitHub repo.</li>
</ol></li>
<li><ol start="4" style="list-style-type: upper-alpha">
<li>Update your Google Sheet <em>Options</em> tab info and refresh your live map.</li>
</ol></li>
</ul>
<p>In the second part, you will learn how to geocode and customize point data in the linked Google Sheet, upload images and other map data to your GitHub repo, and add scanned background map layers if desired.</p>
<ul>
<li><ol start="5" style="list-style-type: upper-alpha">
<li>Add text, media, markers, and geocode locations in the Google Sheet <em>Chapters</em> tab.</li>
</ol></li>
<li><ol start="6" style="list-style-type: upper-alpha">
<li>Optional: Add georeferenced historical map image or GeoJSON overlays.</li>
</ol></li>
</ul>
<p>In the third part, you have two options to finalize your map before publicly sharing with others:</p>
<ul>
<li><ol start="7" style="list-style-type: upper-alpha">
<li>Save each Google Sheets tab as a CSV file and upload to GitHub.</li>
</ol></li>
<li>OR</li>
<li><ol start="8" style="list-style-type: upper-alpha">
<li>Get your own Google Sheets API Key to insert into the code.</li>
</ol></li>
</ul>
<p>If any problems arise, see the <a href="fix.html">Fix Common Problems</a> section of the appendix.</p>
<p>Now that you have a better sense of the big picture, let’s get started with the first part of the tutorial.</p>
<div id="a-copy-the-github-template-and-publish-your-version-with-github-pages-1" class="section level4 unnumbered">
<h4>A) Copy the GitHub template and publish your version with GitHub Pages</h4>
<ol style="list-style-type: decimal">
<li><p>Open the <a href="https://github.com/handsondataviz/leaflet-storymaps-with-google-sheets">GitHub code template</a> in a new tab.</p></li>
<li><p>In the upper-right corner of the code template, sign in to your free GitHub account.</p></li>
<li><p>In the upper-right corner, click the green <em>Use this template</em> button to make a copy of the repository in your GitHub account. On the next screen, name your repo <code>leaflet-storymaps-with-google-sheets</code> or choose a different meaningful name in all lower-case. Click the <em>Create repository from template</em> button. Your copy of the repo will follow this format:</p></li>
</ol>
<p><code>https://github.com/USERNAME/leaflet-storymaps-with-google-sheets</code></p>
<ol start="4" style="list-style-type: decimal">
<li>In your new copy of the code repo, click the upper-right <em>Settings</em> button and scroll way down to the GitHub Pages area. In the drop-down menu, change <em>Source</em> from <em>None</em> to <em>Main</em>, keep the default <em>/(root)</em> setting, and press <em>Save</em> as shown in Figure <a href="leaflet-storymaps-with-google-sheets.html#fig:leaflet-github-pages-main3">12.17</a>. This step tells GitHub to publish a live version of your map on the public web, where anyone can access it in their browser, if they have the web address.</li>
</ol>

<div class="figure"><span id="fig:leaflet-github-pages-main3"></span>
<img src="images/12-leaflet/leaflet-github-pages-main.png" alt="In Settings, go to GitHub Pages, switch the source from None to Main, and Save." width="300" />
<p class="caption">
Figure 12.17: In <em>Settings</em>, go to <em>GitHub Pages</em>, switch the source from <em>None</em> to <em>Main</em>, and <em>Save</em>.
</p>
</div>
<ol start="5" style="list-style-type: decimal">
<li>Scroll down to GitHub Pages section again, and copy the link to your published web site, which will appear in this format:</li>
</ol>
<p><code>https://USERNAME.github.io/leaflet-maps-with-google-sheets</code></p>
<ol start="6" style="list-style-type: decimal">
<li><p>Scroll up to the top, and click on your repo name to go back to its main page.</p></li>
<li><p>At the top level of your repo main page, click on README.md, and click the pencil icon to edit this file.</p></li>
<li><p>Delete the link to the <em>our</em> live site, as shown in Figure <a href="leaflet-storymaps-with-google-sheets.html#fig:storymap-readme-link-top">12.18</a>, and paste in the link to <em>your</em> published site. Scroll down to <em>Commit</em> your changes.</p></li>
</ol>

<div class="figure"><span id="fig:storymap-readme-link-top"></span>
<img src="images/12-leaflet/storymap-readme-link-top.png" alt="Edit your README file to replace the link to our site with the link to your site."  />
<p class="caption">
Figure 12.18: Edit your README file to replace the link to <em>our</em> site with the link to <em>your</em> site.
</p>
</div>
<ol start="9" style="list-style-type: decimal">
<li>On your repo main page, right-click the link to open your live map in a new tab. <em>Be patient</em>. GitHub Pages normally will display your live map within 30 seconds, but sometimes it may require several minutes to appear.</li>
</ol>
</div>
<div id="b-file-make-a-copy-of-google-sheet-template-share-and-publish-1" class="section level4 unnumbered">
<h4>B) File &gt; Make a Copy of Google Sheet template, Share, and Publish</h4>
<ol style="list-style-type: decimal">
<li><p>Open the <a href="13-">Google Sheets template</a> in a new tab.</p></li>
<li><p>Sign into your Google account, and select <em>File &gt; Make a Copy</em> to save your own version of this Google Sheet on your Google Drive.</p></li>
<li><p>Click the blue <em>Share</em> button, and click <em>Change to anyone with the link</em>, then click <em>Done</em>. This publicly shares your map data, which is required to make this template work.</p></li>
<li><p>Go to <em>File &gt; Publish to the Web</em>, and click the green <em>Publish</em> button to publish the entire document, so that the Leaflet code can read it. Then click the upper-right <em>X</em> symbol to close this window.</p></li>
<li><p>At the top of your browser, copy your Google Sheet address or URL (which usually ends in <code>...XYZ/edit#gid=0</code>), as shown in Figure <a href="leaflet-storymaps-with-google-sheets.html#fig:sheets-publish2">12.19</a>. Do <em>NOT</em> copy the <em>Published to the web</em> address (which usually ends in <code>...XYZ/pubhtml</code>) because that link is slightly different and will not work in this template.</p></li>
</ol>

<div class="figure"><span id="fig:sheets-publish2"></span>
<img src="images/12-leaflet/sheets-publish-annotated.png" alt="Copy the Google Sheet address at the top of the browser, NOT the Publish to the web address." width="500" />
<p class="caption">
Figure 12.19: Copy the Google Sheet address at the top of the browser, NOT the <em>Publish to the web</em> address.
</p>
</div>
</div>
<div id="c-paste-your-google-sheet-browser-address-in-two-places-in-your-github-repo-1" class="section level4 unnumbered">
<h4>C) Paste your Google Sheet browser address in two places in your GitHub repo</h4>
<p>Our next task is to link your published Google Sheet to your Leaflet code in GitHub, so that it can pull your data from the Sheet to display on the map.</p>
<ol style="list-style-type: decimal">
<li><p>At the top of your GitHub repo, click to open the file named <code>google-doc-url.js</code>, and click the pencil symbol to edit it.</p></li>
<li><p>Paste <em>your</em> Google Sheet address or URL (which usually ends in <code>...XYZ/edit#gid=0</code>) to replace <em>our</em> existing URL, as shown in Figure <a href="leaflet-storymaps-with-google-sheets.html#fig:google-doc-url2">12.20</a>. Be careful <em>NOT</em> to erase the single quotation marks or the semicolon at the end. Scroll down to <em>Commit</em> your changes. See separate instructions about the Google API key further below.</p></li>
</ol>

<div class="figure"><span id="fig:google-doc-url2"></span>
<img src="images/12-leaflet/google-doc-url.png" alt="Paste in your Google Sheet URL to replace our URL."  />
<p class="caption">
Figure 12.20: Paste in <em>your</em> Google Sheet URL to replace <em>our</em> URL.
</p>
</div>
<ol start="3" style="list-style-type: decimal">
<li>Also, let’s paste your Google Sheet URL in second place to help you keep track of it. In your GitHub repo, click the README.md file to open it, click the pencil symbol to edit it, and paste <em>your</em> Google Sheet URL to replace <em>our</em> existing URL, as shown in Figure <a href="leaflet-storymaps-with-google-sheets.html#fig:storymap-readme-link-bottom">12.21</a>. Scroll down to <em>Commit</em> your changes.</li>
</ol>

<div class="figure"><span id="fig:storymap-readme-link-bottom"></span>
<img src="images/12-leaflet/storymap-readme-link-bottom.png" alt="Edit your README file to replace the link to our site with the link to your site."  />
<p class="caption">
Figure 12.21: Edit your README file to replace the link to <em>our</em> site with the link to <em>your</em> site.
</p>
</div>
<p>Feel free to remove any other content on the README page that you do not wish to keep.</p>
</div>
<div id="d-update-your-google-sheet-options-tab-info-and-refresh-your-live-map-1" class="section level4 unnumbered">
<h4>D) Update your Google Sheet <em>Options</em> tab info and refresh your live map</h4>
<p>Now that your published Google Sheet is linked to your live map, go to the <em>Options</em> tab to update any of these items:</p>
<ul>
<li>Storymap Title</li>
<li>Storymap Subtitle – with code for downward arrow: <code>&lt;br&gt;&lt;small&gt;Scroll down &lt;i class='fa fa-chevron-down'&gt;&lt;/i&gt;&lt;/small&gt;</code></li>
<li>Author Name</li>
<li>Author Email or Website</li>
<li>Author GitHub Repo Link</li>
</ul>
<p>Open the browser tab that displays your live map and refresh the page to see your changes. If your changes do not appear within a few seconds, see the <a href="fix.html">Fix Common Problems</a> section of the appendix.</p>
</div>
<div id="e-add-text-media-markers-and-geocode-locations-in-the-chapters-tab." class="section level4 unnumbered">
<h4>E) Add text, media, markers, and geocode locations in the Chapters tab.</h4>
<p>Now we can start to add new content to your map. In the <em>Chapters</em> tab of your Google Sheet, you’ll see column headers to organize and display interactive markers on your map. Replace the demonstration data with your own, but do <em>not</em> delete or rename the column headers, since the Leaflet code looks for these specific names.</p>
<ul>
<li><p>Chapter: The title appearing at the top of each section in the scrolling narrative.</p></li>
<li><p>Media Link: You have several options to display either an image, audio, or video in each chapter. For images, you can insert an external link to an online service (such as Flickr), as long as it begins with <code>https</code> (secure) and ends with either <code>.jpg</code> or <code>.png</code>. You can also insert a YouTube video embed link by following directions shown in the <a href="https://handsondataviz.github.io/leaflet-storymaps-with-google-sheets/#9">YouTube section of the template</a>. Or you can upload an image file into the <code>media</code> subfolder in your GitHub repo, as shown in Figure <a href="leaflet-storymaps-with-google-sheets.html#fig:storymap-media-upload">12.22</a>, and enter the pathname in the Google Sheet in this format: <code>media/your-file-name.jpg</code> or <code>...png</code>. Similarly, you can upload an audio file in <code>.mp3</code> (recommended) or <code>.ogg</code> or <code>.wav</code> format.</p></li>
</ul>

<div class="figure"><span id="fig:storymap-media-upload"></span>
<img src="images/12-leaflet/storymap-media-upload.png" alt="In GitHub, click to open the media folder and Add file - Upload files." width="400" />
<p class="caption">
Figure 12.22: In GitHub, click to open the <code>media</code> folder and <em>Add file - Upload files</em>.
</p>
</div>
<p>Warning: Media file pathnames are case-sensitive, and we recommend using <em>all lowercase characters</em>, including the suffix ending. Also, since the code template automatically resizes images to fit, we recommend that you <em>reduce the size</em> of any images to 600x400 pixels or less prior to uploading, to make sure your storymap scrolls quickly.</p>
<p>Tip: Some people accidentally erase the entire <code>media</code> folder. For example, if you delete all of the contents of a GitHub repo folder, that action also deletes the folder, because GitHub does not keep track of empty folders. To create a new folder in your GitHub repo, go to <em>Add file - Create new file</em>, then type the folder name followed by a slash (such as <code>media/</code>), then type a temporary file name (such as <code>temp.md</code>) to serve as a placeholder so that your new folder will not be empty. Now you can upload files into your new GitHub repo folder.</p>
<p>Tip: You can display multiple images for one location by creating a series of rows, but only list the <em>Chapter</em> and <em>Location</em> information in the first row of the series, and leave it blank for the others.</p>
<ul>
<li><p>Media Credit: To display text about the origin of the media, such as “Source:…”.</p></li>
<li><p>Media Credit Link: Add a direct link to the source info in the Media Credit text above.</p></li>
<li><p>Description: Designed to display about a paragraph or less of text for the Chapter. You may insert HTML tags to add line breaks (such as <code>&lt;br&gt;</code>), or to open external links in a new tab, such as <code>&lt;a href='https://www.w3schools.com/' target='_blank'&gt;Visit W3Schools&lt;/a&gt;</code>. Learn about HTML syntax at <a href="https://www.w3schools.com/html/html_links.asp">W3Schools</a>.</p></li>
<li><p>Zoom: Leaflet’s default zoom levels are between 0 (world view) to 18 (individual buildings), and most free basemap tiles, such as those provided by Stamen or CartoDB are available for each level in this range. There exist more detailed basemaps that allow you to use higher values. Experiment with zoom levels to get the best view for your story, and remember that given the same zoom level, larger screens will show larger areas compared to smaller screens, such as smartphones.</p></li>
<li><p>Marker: Select either <code>Numbered</code> (the default) or <code>Plain</code> or <code>Hidden</code>. The latter works best when assigning several chapters to one location (to avoid stacking markers on top of each other) or when zooming out for a broader view (without highlighting one specific location).</p></li>
<li><p>Marker Color: Insert any standard web color name such as <code>blue</code> or <code>darkblue</code>, or insert a web color code such as <code>#775307</code> or <code>rgba(200,100,0,0.5)</code>. See options at <a href="https://www.w3schools.com/colors/colors_names.asp">W3Schools Color Names</a>.</p></li>
<li><p>Location, Latitude, Longitude: These place your markers at points on the map. Although the code template only requires Latitude and Longitude, it’s wise to paste an address or place name into the Location column as a reminder to correspond with the numerical coordinates. Use the <a href="geocode.html">Geocoding by SmartMonkey Add-on from Chapter 2</a> and select <em>Add-ons &gt; Geocoding by SmartMonkey &gt; Geocode Details</em> to create a new sheet with sample data and display results for three new columns: <em>Latitude</em>, <em>Longitude</em>, and <em>Address found</em>, as shown in Figure <a href="leaflet-storymaps-with-google-sheets.html#fig:geocode-details3">12.23</a>. Paste in your own address data and repeat the step above to geocode it, then copy and paste the results into your <em>Points</em> sheet.</p></li>
</ul>

<div class="figure"><span id="fig:geocode-details3"></span>
<img src="images/12-leaflet/geocode-details.png" alt="Select Add-ons–Geocoding by SmartMonkey–Geocode Details to display sample data with results for three new columns: Latitude, Longitude, and Address found."  />
<p class="caption">
Figure 12.23: Select <em>Add-ons–Geocoding by SmartMonkey–Geocode Details</em> to display sample data with results for three new columns: <em>Latitude</em>, <em>Longitude</em>, and <em>Address found</em>.
</p>
</div>
<p>Open the browser tab that displays your live map and refresh the page to see your changes. If your changes do not appear within a few seconds, see the <a href="fix.html">Fix Common Problems</a> section of the appendix.</p>
</div>
<div id="f-optional-add-historical-map-image-or-geojson-overlays" class="section level4 unnumbered">
<h4>F) Optional: Add historical map image or GeoJSON overlays</h4>
<p>The code template allows you to enrich your story by placing two different types of layers on top of the background map: georeferenced map images (such as a historical map) and GeoJSON geodata (such as a pathway, boundary lines, or a color-coded choropleth map). You can add both types of layers to specific chapters or the entire story. Also, you can adjust the transparency level to reveal or hide the present-day background map. To prepare both types of layers, you will need to jump ahead to <a href="transform.html">Chapter 13: Transform Your Map Data</a>, but here we’ll explain the steps to insert them in your storymap template.</p>
<p>To add a historical map overlay to one or more story map chapters, it must be <em>georeferenced</em> (also called georectified), which means to digitally align the static map image with a more precise present-day interactive map. If you have a high-quality static image of a historical map, use the <a href="mapwarper.html">Map Warper tool</a> as described in Chapter 13 to align several known points with those on a present-day interactive map. Map Warper transforms the static map image into interactive map tiles, and publicly hosts them online with a link in Google/OpenStreetMap format, similar to <code>https://mapwarper.net/maps/tile/14781/{z}/{x}/{y}.png</code>. Or you can search for historical maps that have already been georeferenced and transformed into tiles (and volunteer for crowdsourcing efforts to align maps) on platforms such as <a href="https://mapwarper.net">Map Warper</a> and the <a href="http://maps.nypl.org/warper/">New York Public Library Map Warper</a>. Although map tile links are <em>not</em> viewable in a normal browser, they can be displayed by the Leaflet Storymaps code. Enter the tile link and your desired transparency level into the Overlay columns in the <em>Chapters</em> tab of your Google Sheet template, as shown in Figure <a href="leaflet-storymaps-with-google-sheets.html#fig:storymap-overlay">12.24</a>.</p>
<ul>
<li>Overlay: Enter a map tile link in Google/OpenStreetMap format, similar to the sample above.</li>
<li>Overlay Transparency: Enter a number from 0 (transparent) to 1 (opaque). The default is 0.7.</li>
</ul>

<div class="figure"><span id="fig:storymap-overlay"></span>
<img src="images/12-leaflet/storymap-overlay.png" alt="Enter map tile link and transparency level into the Google Sheet template (on left) to display it in one or more storymap chapters (on right)." width="600" />
<p class="caption">
Figure 12.24: Enter map tile link and transparency level into the Google Sheet template (on left) to display it in one or more storymap chapters (on right).
</p>
</div>
<p>To add a visible path, geographic boundaries, or a filled choropleth map to your story, consider adding a GeoJSON data layer to one or more chapters. Read about <a href="geojson.html">GeoJSON and geospatial data formats</a> in Chapter 13, where you can also learn <a href="find-geojson.html">how to find existing GeoJSON boundary files</a>, or draw or edit your own geodata with the <a href="geojsonio.html">GeoJson.io tool</a> or <a href="mapshaper.html">Mapshaper tool</a>. We recommend that you name your GeoJSON files in lower-case characters with no spaces. Upload the file to your GitHub repository by opening the <code>geojson</code> folder and selecting <em>Add file - Upload files</em>. In your Google Sheet template, enter the pathname in the <em>GeoJSON Overlay</em> column in this format: <code>geojson/your-file-name.geojson</code>, as shown in Figure <a href="leaflet-storymaps-with-google-sheets.html#fig:storymap-geojson">12.25</a>.</p>

<div class="figure"><span id="fig:storymap-geojson"></span>
<img src="images/12-leaflet/storymap-geojson.png" alt="Enter the pathname in the GeoJSON Overlay column (on left) to display it in one or more storymap chapters (on right)." width="600" />
<p class="caption">
Figure 12.25: Enter the pathname in the <em>GeoJSON Overlay</em> column (on left) to display it in one or more storymap chapters (on right).
</p>
</div>
<p>When you create or edit GeoJSON data with a tool like <a href="geojsonio.html">GeoJson.io</a>, you can directly edit its feature properties. If you wish to display the same properties you assigned to your GeoJSON file in your storymap, we recommend naming them as follows:</p>
<ul>
<li>weight (width of line or polygon border; storymap template default is 1px)</li>
<li>color (of line or polygon border; default is gray)</li>
<li>opacity (of line or polygon border; default is 0.5)</li>
<li>fillColor (of polygon; default is white)</li>
<li>fillOpacity (of polygon; default is 0.7)</li>
</ul>
<p>Or you can enter properties and CSS codes in the <em>GeoJSON Feature Properties</em> template column, in this format, separated by semicolons, with no quotation marks required: <code>weight:3;color:red;opacity:1;fillColor:orange;fillOpacity:0.9</code>. You can assign colors with standard names, hex codes, or RGBA values as described in the <a href="https://www.w3schools.com/colors/colors_picker.asp">W3Schools Colors Picker</a>.</p>
<p>Inside the template you’ll discover more ways to customize your storymap, such as:</p>
<ul>
<li>Insert logo (see Options tab in Google Sheets)</li>
<li>Insert Google Analytics tracking ID (see Options tab in Google Sheets</li>
<li>Adjust title size and font (go to css/styles.css file in GitHub)</li>
<li>To insert a horizontal divider in Chapter text (copy and paste this text into Description field in Google Sheets, and avoid changing single-quote marks into curly apostrophes)
<code>&lt;span style='display:block;width:100%;height:1px;background-color: silver; margin: 20px 0;'&gt;&lt;/span&gt;</code></li>
</ul>
</div>
</div>
<div id="finalize-your-storymap-before-sharing-with-the-public" class="section level3 unnumbered">
<h3>Finalize Your Storymap Before Sharing with the Public</h3>
<p>Now you’re ready to finalize your map. If you wish to share your map link with the public, read the options below and choose either step G <em>OR</em> step H.</p>
<p>Warning: We reserve the right to change <em>our</em> Google Sheets API key at any time, especially if other people overuse or abuse it. This means that you <em>must</em> finalize your map using either step G or H below before sharing it publicly, because it will <em>stop working</em> if we change our key.</p>
<div id="g-save-each-google-sheets-tab-as-a-csv-file-and-upload-to-github-1" class="section level4 unnumbered">
<h4>G) Save each Google Sheets tab as a CSV file and upload to GitHub</h4>
<p>If you have finished entering most of your data into your Google Sheets, downloading them into separate CSV files and uploading those into your GitHub repo is the <em>best</em> long-term preservation strategy. This approach keeps your map and data together in the same GitHub repo, and removes the risk that your map will break due to an interruption to Google services. Plus, you can still edit your map data. If this approach makes sense, follow these steps:</p>
<ol style="list-style-type: decimal">
<li>In your Google Sheets, go to each tab and select <em>File &gt; Download</em> into CSV format, as shown in Figure <a href="leaflet-storymaps-with-google-sheets.html#fig:storymap-download-csv">12.26</a>, to create a separate file for each tab.</li>
</ol>

<div class="figure"><span id="fig:storymap-download-csv"></span>
<img src="images/12-leaflet/storymap-download-csv.png" alt="Download each Google Sheets tab as a separate CSV file." width="350" />
<p class="caption">
Figure 12.26: Download each Google Sheets tab as a separate CSV file.
</p>
</div>
<ol start="2" style="list-style-type: decimal">
<li>Shorten each file name as shown. The names must be exact. The first two files below are required, and others are optional.</li>
</ol>
<ul>
<li>Chapters.csv</li>
<li>Options.csv</li>
<li>Notes.csv (or .txt) Recommended to keep any notes with your data, but not required.</li>
</ul>
<ol start="3" style="list-style-type: decimal">
<li>In your GitHub repo, click the <code>csv</code> subfolder to open it, select <em>Add file &gt; Upload files</em>, and upload all of the CSV files above into this subfolder, as shown in Figure <a href="leaflet-storymaps-with-google-sheets.html#fig:storymap-upload-csv">12.27</a>. The Leaflet template code checks here first for data, and if it finds CSV files with the names above, it will pull the map data directly from them, instead of your Google Sheets. <em>Remember</em> that from this point forward, any edits in your Google Sheet will <em>no longer appear automatically</em> in your map.</li>
</ol>

<div class="figure"><span id="fig:storymap-upload-csv"></span>
<img src="images/12-leaflet/storymap-upload-csv.png" alt="Upload your map data files into the csv subfolder in GitHub." width="400" />
<p class="caption">
Figure 12.27: Upload your map data files into the <em>csv</em> subfolder in GitHub.
</p>
</div>
<ol start="4" style="list-style-type: decimal">
<li>If you wish to edit your map after uploading your CSV files, you have two options. You can make small edits directly to your CSV files by opening them in the GitHub web interface. Or you can make larger edits in the Google Sheet, and repeating the steps above to download them in CSV format and upload them to replace your existing files on GitHub.</li>
</ol>
</div>
<div id="h-get-your-own-google-sheets-api-key-to-insert-into-the-code-1" class="section level4 unnumbered">
<h4>H) Get your own Google Sheets API Key to insert into the code</h4>
<p>As an alternative to step G, if you wish to continue to store your map data in your Google Sheets that is published online, go to the section of this chapter titled <a href="google-sheets-api-key.html">Get Your Own Google Sheets API Key</a>, and insert it into the Leaflet map code as described, to avoid overusing our key. Google Sheets requires an API key to maintain reasonable <a href="https://developers.google.com/sheets/api/limits">usage limits</a> on its service. You can get a free Google Sheets API key if you have a personal Google account, but <em>not</em> a Google Suite account provided by your school or business.</p>
<p>If problems arise, see the <a href="fix.html">Fix Common Problems</a> section of the appendix.</p>
</div>
</div>
</div>
<footer style="margin-top: 60px; font-size: 0.8em; padding: 10px; background-color: rgba(0,0,0,0.08); display: table; width: 98%">

  <a href="https://www.amazon.com/Hands-Data-Visualization-Storytelling-Spreadsheets/dp/1492086002/" style="width: 80px; margin-left: auto; margin-right: auto;"  class="db dtc-ns">
    <img src="images/0-preface/cover-400wide.jpg" alt="O'Reilly Book Cover" style="width: 100px;" />
  </a>

  <div style="padding: 0 15px;" class="db dtc-ns">
    <p>
      Buy the print book at
      <a href="https://www.amazon.com/Hands-Data-Visualization-Storytelling-Spreadsheets/dp/1492086002/">Amazon</a> -
      <a href="https://www.barnesandnoble.com/w/hands-on-data-visualization-jack-dougherty/1137725933">Barnes & Noble</a> -
      <a href="https://bookshop.org/books/hands-on-data-visualization-interactive-storytelling-from-spreadsheets-to-code/9781492086000">Bookshop</a> -
      <a href="https://www.powells.com/book/hands-on-data-visualization-9781492086000">Powell's</a> - or your local bookstore.<br>
      Or begin a 30-day free trial to all books and digital content on the <a href="https://learning.oreilly.com/get-learning/?code=HODV21">O'Reilly online learning platform</a>.<br>
      Share your feedback about the book by tagging <a href="https://twitter.com/handsondataviz" target="_blank">@handsondataviz on Twitter</a> or
      <a href="https://handsondataviz.org/authors.html">contact the authors</a>.
    </p>

    <p style="color: rgba(0,0,0,0.4)">
      &copy; 2021 Jack Dougherty & Ilya Ilyankou / Picturedigits Ltd.
    </p>
  </div>
</footer>

<style>
  footer a:hover img {
    transform: rotate(1deg);
  }

  .db {
    display: block;
  }

  @media screen and (min-width: 30em) {
    .dtc-ns {
      display: table-cell;
      vertical-align: middle;
    }
}
</style>
            </section>

          </div>
        </div>
      </div>
<a href="leaflet-maps-with-google-sheets.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="google-sheets-api-key.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": true,
"facebook": false,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": false
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": "https://github.com/handsondataviz/book/blob/main/12-leaflet.Rmd",
"text": null
},
"download": ["HandsOnDataViz.pdf"],
"toc": {
"collapse": "section",
"scroll_highlight": true
},
"search": true
});
});
</script>

</body>

</html>
